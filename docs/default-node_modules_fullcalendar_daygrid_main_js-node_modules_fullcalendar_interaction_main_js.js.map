{"version":3,"file":"default-node_modules_fullcalendar_daygrid_main_js-node_modules_fullcalendar_interaction_main_js.js","mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACoB;;AAE4qB;AACroB;;AAE3D;AACA;AACA;AACA;AACA;AACA,IAAI,gDAAS;AACb;AACA;AACA,4BAA4B,+DAAS;AACrC;AACA;AACA;AACA;AACA;AACA,gCAAgC,0EAAoB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB,sBAAsB;AAC3C,SAAS;AACT,gBAAgB,mEAAa,CAAC,0DAAQ,IAAI,4BAA4B,qCAAqC,QAAQ,mEAAa,UAAU,wEAAwE;AAClN,YAAY,mEAAa,CAAC,kEAAgB,IAAI,2IAA2I,MAAM;AAC/L;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,0EAAoB;AACvE,uDAAuD,8EAAwB;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,kEAAgB;AACjD,qBAAqB;AACrB,aAAa;AACb;AACA,gBAAgB,mEAAa,CAAC,0DAAQ,IAAI,4BAA4B,qCAAqC,QAAQ,mEAAa,UAAU,wEAAwE;AAClN,YAAY,mEAAa,eAAe,gGAAgG,SAAS,qCAAqC,GAAG,uBAAuB,MAAM;AACtN;AACA;AACA,CAAC,CAAC,+DAAa;;AAEf;AACA;AACA,oBAAoB,YAAY;AAChC;AACA;AACA,oCAAoC,oBAAoB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,YAAY;AAChC;AACA;AACA,oCAAoC,oBAAoB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,YAAY;AACpC;AACA;AACA;AACA;AACA,wBAAwB,YAAY;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,gBAAgB;AACvD;AACA;AACA;AACA;AACA;A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CA;AACA,sDAAsD,6BAA6B;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,yCAAyC,sBAAsB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,sBAAsB,oBAAoB;AAC1C;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,oBAAoB;AAC1C;AACA;AACA;AACA;AACA;AACA,0CAA0C,qBAAqB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,qBAAqB;AAC/D;AACA;AACA,kEAAkE;AAClE;AACA,iEAAiE;AACjE,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,sBAAsB,cAAc;AACpC;AACA;AACA,sCAAsC,qBAAqB;AAC3D;AACA,wCAAwC,qBAAqB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,qEAAe;AACrC;AACA,aAAa,6DAAO;AACpB,KAAK;AACL,WAAW,+CAAQ,CAAC,+CAAQ,GAAG,UAAU;AACzC;AACA,gBAAgB,+CAAQ,CAAC,+CAAQ,GAAG,oBAAoB,yBAAyB;AACjF;AACA;AACA,SAAS,gKAAgK;AACzK;AACA;AACA,IAAI,gDAAS;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,0BAA0B,mEAAa;AACtF;AACA,4BAA4B,+BAA+B;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,mEAAa;AAC/C;AACA;AACA;AACA,2CAA2C,+CAAQ,CAAC,+CAAQ,GAAG,oBAAoB,MAAM,oEAAc,kCAAkC;AACzI,6CAA6C,mEAAa;AAC1D;AACA,uFAAuF;AACvF,0EAA0E;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,8DAAY;;AAEd;AACA,IAAI,gDAAS;AACb;AACA;AACA,+BAA+B,wDAAM,IAAI;AACzC,gCAAgC,wDAAM,IAAI;AAC1C,6BAA6B,wDAAM,IAAI;AACvC,mCAAmC,wDAAM,IAAI;AAC7C,0BAA0B,+DAAS;AACnC;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,mEAAa;AACpD;AACA;AACA;AACA;AACA,gBAAgB,mEAAa,SAAS,kCAAkC;AACxE;AACA;AACA;AACA,iJAAiJ;AACjJ,wBAAwB,mEAAa,cAAc;AACnD,oBAAoB,mEAAa,CAAC,0DAAQ;AAC1C,wBAAwB,mEAAa,CAAC,0DAAQ;AAC9C,wBAAwB,mEAAa,CAAC,0DAAQ;AAC9C,oBAAoB,mEAAa,CAAC,0DAAQ;AAC1C;AACA;AACA,mFAAmF;AACnF,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,kEAAY;AACvC;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA,kEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE;AACpE;AACA;AACA;AACA,8DAA8D,6BAA6B;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,mEAAa,UAAU;AAClD;AACA;AACA;AACA;AACA;AACA,uBAAuB,6BAA6B,mEAAa,qBAAqB,+CAAQ,GAAG,6HAA6H,EAAE,gEAAU,wBAAwB,mEAAa,kBAAkB,+CAAQ,GAAG,uLAAuL,EAAE,gEAAU;AAC/e;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,oBAAoB;AAChE;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,2BAA2B,mEAAa,UAAU,KAAK,wEAAkB,2EAA2E;AACpJ,oBAAoB,mEAAa,CAAC,yDAAO,EAAE,+CAAQ,GAAG,UAAU,EAAE,gEAAU;AAC5E,oBAAoB,gEAAU;AAC9B;AACA;AACA,eAAe,qEAAmB,SAAS,oDAAa,EAAE,0DAAQ,IAAI;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,0CAA0C;AAC3G;AACA;AACA;AACA,4CAA4C,+DAAa;AACzD;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,+CAAQ,CAAC,+CAAQ,GAAG;AAC1D;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,yBAAyB;AAC/E;AACA;AACA,CAAC,CAAC,+DAAa;AACf;AACA,0BAA0B,8DAAY;AACtC,CAAC;AACD;AACA;AACA;AACA;AACA,gEAAgE;AAChE,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA,KAAK,IAAI;AACT;AACA;AACA;AACA,sDAAsD,6BAA6B;AACnF;AACA,oDAAoD,0BAA0B;AAC9E;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI,gDAAS;AACb;AACA;AACA,sCAAsC,6DAAO;AAC7C,iCAAiC,6DAAO;AACxC,iCAAiC,6DAAO;AACxC,uCAAuC,6DAAO;AAC9C,+BAA+B,6DAAO;AACtC,iCAAiC,6DAAO;AACxC,4BAA4B,wDAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,mEAAa,UAAU;AACvC;AACA;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","sources":["./node_modules/@fullcalendar/daygrid/main.js","./node_modules/@fullcalendar/interaction/main.js"],"sourcesContent":["/*!\nFullCalendar v5.10.1\nDocs & License: https://fullcalendar.io/\n(c) 2021 Adam Shaw\n*/\nimport './main.css';\n\nimport { createRef, getStickyHeaderDates, createElement, ViewRoot, SimpleScrollGrid, getStickyFooterScrollbar, renderScrollShim, DateComponent, buildNavLinkAttrs, DayCellContent, Fragment, BaseComponent, createFormatter, StandardEvent, buildSegTimeText, EventRoot, getSegAnchorAttrs, memoize, MoreLinkRoot, getSegMeta, createAriaClickAttrs, getUniqueDomId, setRef, DayCellRoot, WeekNumberRoot, buildEntryKey, intersectSpans, SegHierarchy, intersectRanges, addDays, RefMap, sortEventSegs, isPropsEqual, buildEventRangeKey, BgEvent, renderFill, PositionCache, NowTimer, Slicer, DayHeader, DaySeriesModel, DayTableModel, addWeeks, diffWeeks, DateProfileGenerator, createPlugin } from '@fullcalendar/common';\nimport { __extends, __assign, __spreadArray } from 'tslib';\n\n/* An abstract class for the daygrid views, as well as month view. Renders one or more rows of day cells.\n----------------------------------------------------------------------------------------------------------------------*/\n// It is a manager for a Table subcomponent, which does most of the heavy lifting.\n// It is responsible for managing width/height.\nvar TableView = /** @class */ (function (_super) {\n    __extends(TableView, _super);\n    function TableView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.headerElRef = createRef();\n        return _this;\n    }\n    TableView.prototype.renderSimpleLayout = function (headerRowContent, bodyContent) {\n        var _a = this, props = _a.props, context = _a.context;\n        var sections = [];\n        var stickyHeaderDates = getStickyHeaderDates(context.options);\n        if (headerRowContent) {\n            sections.push({\n                type: 'header',\n                key: 'header',\n                isSticky: stickyHeaderDates,\n                chunk: {\n                    elRef: this.headerElRef,\n                    tableClassName: 'fc-col-header',\n                    rowContent: headerRowContent,\n                },\n            });\n        }\n        sections.push({\n            type: 'body',\n            key: 'body',\n            liquid: true,\n            chunk: { content: bodyContent },\n        });\n        return (createElement(ViewRoot, { viewSpec: context.viewSpec }, function (rootElRef, classNames) { return (createElement(\"div\", { ref: rootElRef, className: ['fc-daygrid'].concat(classNames).join(' ') },\n            createElement(SimpleScrollGrid, { liquid: !props.isHeightAuto && !props.forPrint, collapsibleWidth: props.forPrint, cols: [] /* TODO: make optional? */, sections: sections }))); }));\n    };\n    TableView.prototype.renderHScrollLayout = function (headerRowContent, bodyContent, colCnt, dayMinWidth) {\n        var ScrollGrid = this.context.pluginHooks.scrollGridImpl;\n        if (!ScrollGrid) {\n            throw new Error('No ScrollGrid implementation');\n        }\n        var _a = this, props = _a.props, context = _a.context;\n        var stickyHeaderDates = !props.forPrint && getStickyHeaderDates(context.options);\n        var stickyFooterScrollbar = !props.forPrint && getStickyFooterScrollbar(context.options);\n        var sections = [];\n        if (headerRowContent) {\n            sections.push({\n                type: 'header',\n                key: 'header',\n                isSticky: stickyHeaderDates,\n                chunks: [{\n                        key: 'main',\n                        elRef: this.headerElRef,\n                        tableClassName: 'fc-col-header',\n                        rowContent: headerRowContent,\n                    }],\n            });\n        }\n        sections.push({\n            type: 'body',\n            key: 'body',\n            liquid: true,\n            chunks: [{\n                    key: 'main',\n                    content: bodyContent,\n                }],\n        });\n        if (stickyFooterScrollbar) {\n            sections.push({\n                type: 'footer',\n                key: 'footer',\n                isSticky: true,\n                chunks: [{\n                        key: 'main',\n                        content: renderScrollShim,\n                    }],\n            });\n        }\n        return (createElement(ViewRoot, { viewSpec: context.viewSpec }, function (rootElRef, classNames) { return (createElement(\"div\", { ref: rootElRef, className: ['fc-daygrid'].concat(classNames).join(' ') },\n            createElement(ScrollGrid, { liquid: !props.isHeightAuto && !props.forPrint, collapsibleWidth: props.forPrint, colGroups: [{ cols: [{ span: colCnt, minWidth: dayMinWidth }] }], sections: sections }))); }));\n    };\n    return TableView;\n}(DateComponent));\n\nfunction splitSegsByRow(segs, rowCnt) {\n    var byRow = [];\n    for (var i = 0; i < rowCnt; i += 1) {\n        byRow[i] = [];\n    }\n    for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n        var seg = segs_1[_i];\n        byRow[seg.row].push(seg);\n    }\n    return byRow;\n}\nfunction splitSegsByFirstCol(segs, colCnt) {\n    var byCol = [];\n    for (var i = 0; i < colCnt; i += 1) {\n        byCol[i] = [];\n    }\n    for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n        var seg = segs_2[_i];\n        byCol[seg.firstCol].push(seg);\n    }\n    return byCol;\n}\nfunction splitInteractionByRow(ui, rowCnt) {\n    var byRow = [];\n    if (!ui) {\n        for (var i = 0; i < rowCnt; i += 1) {\n            byRow[i] = null;\n        }\n    }\n    else {\n        for (var i = 0; i < rowCnt; i += 1) {\n            byRow[i] = {\n                affectedInstances: ui.affectedInstances,\n                isEvent: ui.isEvent,\n                segs: [],\n            };\n        }\n        for (var _i = 0, _a = ui.segs; _i < _a.length; _i++) {\n            var seg = _a[_i];\n            byRow[seg.row].segs.push(seg);\n        }\n    }\n    return byRow;\n}\n\nvar TableCellTop = /** @class */ (function (_super) {\n    __extends(TableCellTop, _super);\n    function TableCellTop() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TableCellTop.prototype.render = function () {\n        var props = this.props;\n        var navLinkAttrs = buildNavLinkAttrs(this.context, props.date);\n        return (createElement(DayCellContent, { date: props.date, dateProfile: props.dateProfile, todayRange: props.todayRange, showDayNumber: props.showDayNumber, extraHookProps: props.extraHookProps, defaultContent: renderTopInner }, function (innerElRef, innerContent) { return ((innerContent || props.forceDayTop) && (createElement(\"div\", { className: \"fc-daygrid-day-top\", ref: innerElRef },\n            createElement(\"a\", __assign({ id: props.dayNumberId, className: \"fc-daygrid-day-number\" }, navLinkAttrs), innerContent || createElement(Fragment, null, \"\\u00A0\"))))); }));\n    };\n    return TableCellTop;\n}(BaseComponent));\nfunction renderTopInner(props) {\n    return props.dayNumberText;\n}\n\nvar DEFAULT_TABLE_EVENT_TIME_FORMAT = createFormatter({\n    hour: 'numeric',\n    minute: '2-digit',\n    omitZeroMinute: true,\n    meridiem: 'narrow',\n});\nfunction hasListItemDisplay(seg) {\n    var display = seg.eventRange.ui.display;\n    return display === 'list-item' || (display === 'auto' &&\n        !seg.eventRange.def.allDay &&\n        seg.firstCol === seg.lastCol && // can't be multi-day\n        seg.isStart && // \"\n        seg.isEnd // \"\n    );\n}\n\nvar TableBlockEvent = /** @class */ (function (_super) {\n    __extends(TableBlockEvent, _super);\n    function TableBlockEvent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TableBlockEvent.prototype.render = function () {\n        var props = this.props;\n        return (createElement(StandardEvent, __assign({}, props, { extraClassNames: ['fc-daygrid-event', 'fc-daygrid-block-event', 'fc-h-event'], defaultTimeFormat: DEFAULT_TABLE_EVENT_TIME_FORMAT, defaultDisplayEventEnd: props.defaultDisplayEventEnd, disableResizing: !props.seg.eventRange.def.allDay })));\n    };\n    return TableBlockEvent;\n}(BaseComponent));\n\nvar TableListItemEvent = /** @class */ (function (_super) {\n    __extends(TableListItemEvent, _super);\n    function TableListItemEvent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TableListItemEvent.prototype.render = function () {\n        var _a = this, props = _a.props, context = _a.context;\n        var timeFormat = context.options.eventTimeFormat || DEFAULT_TABLE_EVENT_TIME_FORMAT;\n        var timeText = buildSegTimeText(props.seg, timeFormat, context, true, props.defaultDisplayEventEnd);\n        return (createElement(EventRoot, { seg: props.seg, timeText: timeText, defaultContent: renderInnerContent, isDragging: props.isDragging, isResizing: false, isDateSelecting: false, isSelected: props.isSelected, isPast: props.isPast, isFuture: props.isFuture, isToday: props.isToday }, function (rootElRef, classNames, innerElRef, innerContent) { return ( // we don't use styles!\n        createElement(\"a\", __assign({ className: ['fc-daygrid-event', 'fc-daygrid-dot-event'].concat(classNames).join(' '), ref: rootElRef }, getSegAnchorAttrs(props.seg, context)), innerContent)); }));\n    };\n    return TableListItemEvent;\n}(BaseComponent));\nfunction renderInnerContent(innerProps) {\n    return (createElement(Fragment, null,\n        createElement(\"div\", { className: \"fc-daygrid-event-dot\", style: { borderColor: innerProps.borderColor || innerProps.backgroundColor } }),\n        innerProps.timeText && (createElement(\"div\", { className: \"fc-event-time\" }, innerProps.timeText)),\n        createElement(\"div\", { className: \"fc-event-title\" }, innerProps.event.title || createElement(Fragment, null, \"\\u00A0\"))));\n}\n\nvar TableCellMoreLink = /** @class */ (function (_super) {\n    __extends(TableCellMoreLink, _super);\n    function TableCellMoreLink() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.compileSegs = memoize(compileSegs);\n        return _this;\n    }\n    TableCellMoreLink.prototype.render = function () {\n        var props = this.props;\n        var _a = this.compileSegs(props.singlePlacements), allSegs = _a.allSegs, invisibleSegs = _a.invisibleSegs;\n        return (createElement(MoreLinkRoot, { dateProfile: props.dateProfile, todayRange: props.todayRange, allDayDate: props.allDayDate, moreCnt: props.moreCnt, allSegs: allSegs, hiddenSegs: invisibleSegs, alignmentElRef: props.alignmentElRef, alignGridTop: props.alignGridTop, extraDateSpan: props.extraDateSpan, popoverContent: function () {\n                var isForcedInvisible = (props.eventDrag ? props.eventDrag.affectedInstances : null) ||\n                    (props.eventResize ? props.eventResize.affectedInstances : null) ||\n                    {};\n                return (createElement(Fragment, null, allSegs.map(function (seg) {\n                    var instanceId = seg.eventRange.instance.instanceId;\n                    return (createElement(\"div\", { className: \"fc-daygrid-event-harness\", key: instanceId, style: {\n                            visibility: isForcedInvisible[instanceId] ? 'hidden' : '',\n                        } }, hasListItemDisplay(seg) ? (createElement(TableListItemEvent, __assign({ seg: seg, isDragging: false, isSelected: instanceId === props.eventSelection, defaultDisplayEventEnd: false }, getSegMeta(seg, props.todayRange)))) : (createElement(TableBlockEvent, __assign({ seg: seg, isDragging: false, isResizing: false, isDateSelecting: false, isSelected: instanceId === props.eventSelection, defaultDisplayEventEnd: false }, getSegMeta(seg, props.todayRange))))));\n                })));\n            } }, function (rootElRef, classNames, innerElRef, innerContent, handleClick, title, isExpanded, popoverId) { return (createElement(\"a\", __assign({ ref: rootElRef, className: ['fc-daygrid-more-link'].concat(classNames).join(' '), title: title, \"aria-expanded\": isExpanded, \"aria-controls\": popoverId }, createAriaClickAttrs(handleClick)), innerContent)); }));\n    };\n    return TableCellMoreLink;\n}(BaseComponent));\nfunction compileSegs(singlePlacements) {\n    var allSegs = [];\n    var invisibleSegs = [];\n    for (var _i = 0, singlePlacements_1 = singlePlacements; _i < singlePlacements_1.length; _i++) {\n        var placement = singlePlacements_1[_i];\n        allSegs.push(placement.seg);\n        if (!placement.isVisible) {\n            invisibleSegs.push(placement.seg);\n        }\n    }\n    return { allSegs: allSegs, invisibleSegs: invisibleSegs };\n}\n\nvar DEFAULT_WEEK_NUM_FORMAT = createFormatter({ week: 'narrow' });\nvar TableCell = /** @class */ (function (_super) {\n    __extends(TableCell, _super);\n    function TableCell() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.rootElRef = createRef();\n        _this.state = {\n            dayNumberId: getUniqueDomId(),\n        };\n        _this.handleRootEl = function (el) {\n            setRef(_this.rootElRef, el);\n            setRef(_this.props.elRef, el);\n        };\n        return _this;\n    }\n    TableCell.prototype.render = function () {\n        var _a = this, context = _a.context, props = _a.props, state = _a.state, rootElRef = _a.rootElRef;\n        var date = props.date, dateProfile = props.dateProfile;\n        var navLinkAttrs = buildNavLinkAttrs(context, date, 'week');\n        return (createElement(DayCellRoot, { date: date, dateProfile: dateProfile, todayRange: props.todayRange, showDayNumber: props.showDayNumber, extraHookProps: props.extraHookProps, elRef: this.handleRootEl }, function (dayElRef, dayClassNames, rootDataAttrs, isDisabled) { return (createElement(\"td\", __assign({ ref: dayElRef, role: \"gridcell\", className: ['fc-daygrid-day'].concat(dayClassNames, props.extraClassNames || []).join(' ') }, rootDataAttrs, props.extraDataAttrs, (props.showDayNumber ? { 'aria-labelledby': state.dayNumberId } : {})),\n            createElement(\"div\", { className: \"fc-daygrid-day-frame fc-scrollgrid-sync-inner\", ref: props.innerElRef /* different from hook system! RENAME */ },\n                props.showWeekNumber && (createElement(WeekNumberRoot, { date: date, defaultFormat: DEFAULT_WEEK_NUM_FORMAT }, function (weekElRef, weekClassNames, innerElRef, innerContent) { return (createElement(\"a\", __assign({ ref: weekElRef, className: ['fc-daygrid-week-number'].concat(weekClassNames).join(' ') }, navLinkAttrs), innerContent)); })),\n                !isDisabled && (createElement(TableCellTop, { date: date, dateProfile: dateProfile, showDayNumber: props.showDayNumber, dayNumberId: state.dayNumberId, forceDayTop: props.forceDayTop, todayRange: props.todayRange, extraHookProps: props.extraHookProps })),\n                createElement(\"div\", { className: \"fc-daygrid-day-events\", ref: props.fgContentElRef },\n                    props.fgContent,\n                    createElement(\"div\", { className: \"fc-daygrid-day-bottom\", style: { marginTop: props.moreMarginTop } },\n                        createElement(TableCellMoreLink, { allDayDate: date, singlePlacements: props.singlePlacements, moreCnt: props.moreCnt, alignmentElRef: rootElRef, alignGridTop: !props.showDayNumber, extraDateSpan: props.extraDateSpan, dateProfile: props.dateProfile, eventSelection: props.eventSelection, eventDrag: props.eventDrag, eventResize: props.eventResize, todayRange: props.todayRange }))),\n                createElement(\"div\", { className: \"fc-daygrid-day-bg\" }, props.bgContent)))); }));\n    };\n    return TableCell;\n}(DateComponent));\n\nfunction computeFgSegPlacement(segs, // assumed already sorted\ndayMaxEvents, dayMaxEventRows, strictOrder, eventInstanceHeights, maxContentHeight, cells) {\n    var hierarchy = new DayGridSegHierarchy();\n    hierarchy.allowReslicing = true;\n    hierarchy.strictOrder = strictOrder;\n    if (dayMaxEvents === true || dayMaxEventRows === true) {\n        hierarchy.maxCoord = maxContentHeight;\n        hierarchy.hiddenConsumes = true;\n    }\n    else if (typeof dayMaxEvents === 'number') {\n        hierarchy.maxStackCnt = dayMaxEvents;\n    }\n    else if (typeof dayMaxEventRows === 'number') {\n        hierarchy.maxStackCnt = dayMaxEventRows;\n        hierarchy.hiddenConsumes = true;\n    }\n    // create segInputs only for segs with known heights\n    var segInputs = [];\n    var unknownHeightSegs = [];\n    for (var i = 0; i < segs.length; i += 1) {\n        var seg = segs[i];\n        var instanceId = seg.eventRange.instance.instanceId;\n        var eventHeight = eventInstanceHeights[instanceId];\n        if (eventHeight != null) {\n            segInputs.push({\n                index: i,\n                thickness: eventHeight,\n                span: {\n                    start: seg.firstCol,\n                    end: seg.lastCol + 1,\n                },\n            });\n        }\n        else {\n            unknownHeightSegs.push(seg);\n        }\n    }\n    var hiddenEntries = hierarchy.addSegs(segInputs);\n    var segRects = hierarchy.toRects();\n    var _a = placeRects(segRects, segs, cells), singleColPlacements = _a.singleColPlacements, multiColPlacements = _a.multiColPlacements, leftoverMargins = _a.leftoverMargins;\n    var moreCnts = [];\n    var moreMarginTops = [];\n    // add segs with unknown heights\n    for (var _i = 0, unknownHeightSegs_1 = unknownHeightSegs; _i < unknownHeightSegs_1.length; _i++) {\n        var seg = unknownHeightSegs_1[_i];\n        multiColPlacements[seg.firstCol].push({\n            seg: seg,\n            isVisible: false,\n            isAbsolute: true,\n            absoluteTop: 0,\n            marginTop: 0,\n        });\n        for (var col = seg.firstCol; col <= seg.lastCol; col += 1) {\n            singleColPlacements[col].push({\n                seg: resliceSeg(seg, col, col + 1, cells),\n                isVisible: false,\n                isAbsolute: false,\n                absoluteTop: 0,\n                marginTop: 0,\n            });\n        }\n    }\n    // add the hidden entries\n    for (var col = 0; col < cells.length; col += 1) {\n        moreCnts.push(0);\n    }\n    for (var _b = 0, hiddenEntries_1 = hiddenEntries; _b < hiddenEntries_1.length; _b++) {\n        var hiddenEntry = hiddenEntries_1[_b];\n        var seg = segs[hiddenEntry.index];\n        var hiddenSpan = hiddenEntry.span;\n        multiColPlacements[hiddenSpan.start].push({\n            seg: resliceSeg(seg, hiddenSpan.start, hiddenSpan.end, cells),\n            isVisible: false,\n            isAbsolute: true,\n            absoluteTop: 0,\n            marginTop: 0,\n        });\n        for (var col = hiddenSpan.start; col < hiddenSpan.end; col += 1) {\n            moreCnts[col] += 1;\n            singleColPlacements[col].push({\n                seg: resliceSeg(seg, col, col + 1, cells),\n                isVisible: false,\n                isAbsolute: false,\n                absoluteTop: 0,\n                marginTop: 0,\n            });\n        }\n    }\n    // deal with leftover margins\n    for (var col = 0; col < cells.length; col += 1) {\n        moreMarginTops.push(leftoverMargins[col]);\n    }\n    return { singleColPlacements: singleColPlacements, multiColPlacements: multiColPlacements, moreCnts: moreCnts, moreMarginTops: moreMarginTops };\n}\n// rects ordered by top coord, then left\nfunction placeRects(allRects, segs, cells) {\n    var rectsByEachCol = groupRectsByEachCol(allRects, cells.length);\n    var singleColPlacements = [];\n    var multiColPlacements = [];\n    var leftoverMargins = [];\n    for (var col = 0; col < cells.length; col += 1) {\n        var rects = rectsByEachCol[col];\n        // compute all static segs in singlePlacements\n        var singlePlacements = [];\n        var currentHeight = 0;\n        var currentMarginTop = 0;\n        for (var _i = 0, rects_1 = rects; _i < rects_1.length; _i++) {\n            var rect = rects_1[_i];\n            var seg = segs[rect.index];\n            singlePlacements.push({\n                seg: resliceSeg(seg, col, col + 1, cells),\n                isVisible: true,\n                isAbsolute: false,\n                absoluteTop: rect.levelCoord,\n                marginTop: rect.levelCoord - currentHeight,\n            });\n            currentHeight = rect.levelCoord + rect.thickness;\n        }\n        // compute mixed static/absolute segs in multiPlacements\n        var multiPlacements = [];\n        currentHeight = 0;\n        currentMarginTop = 0;\n        for (var _a = 0, rects_2 = rects; _a < rects_2.length; _a++) {\n            var rect = rects_2[_a];\n            var seg = segs[rect.index];\n            var isAbsolute = rect.span.end - rect.span.start > 1; // multi-column?\n            var isFirstCol = rect.span.start === col;\n            currentMarginTop += rect.levelCoord - currentHeight; // amount of space since bottom of previous seg\n            currentHeight = rect.levelCoord + rect.thickness; // height will now be bottom of current seg\n            if (isAbsolute) {\n                currentMarginTop += rect.thickness;\n                if (isFirstCol) {\n                    multiPlacements.push({\n                        seg: resliceSeg(seg, rect.span.start, rect.span.end, cells),\n                        isVisible: true,\n                        isAbsolute: true,\n                        absoluteTop: rect.levelCoord,\n                        marginTop: 0,\n                    });\n                }\n            }\n            else if (isFirstCol) {\n                multiPlacements.push({\n                    seg: resliceSeg(seg, rect.span.start, rect.span.end, cells),\n                    isVisible: true,\n                    isAbsolute: false,\n                    absoluteTop: rect.levelCoord,\n                    marginTop: currentMarginTop, // claim the margin\n                });\n                currentMarginTop = 0;\n            }\n        }\n        singleColPlacements.push(singlePlacements);\n        multiColPlacements.push(multiPlacements);\n        leftoverMargins.push(currentMarginTop);\n    }\n    return { singleColPlacements: singleColPlacements, multiColPlacements: multiColPlacements, leftoverMargins: leftoverMargins };\n}\nfunction groupRectsByEachCol(rects, colCnt) {\n    var rectsByEachCol = [];\n    for (var col = 0; col < colCnt; col += 1) {\n        rectsByEachCol.push([]);\n    }\n    for (var _i = 0, rects_3 = rects; _i < rects_3.length; _i++) {\n        var rect = rects_3[_i];\n        for (var col = rect.span.start; col < rect.span.end; col += 1) {\n            rectsByEachCol[col].push(rect);\n        }\n    }\n    return rectsByEachCol;\n}\nfunction resliceSeg(seg, spanStart, spanEnd, cells) {\n    if (seg.firstCol === spanStart && seg.lastCol === spanEnd - 1) {\n        return seg;\n    }\n    var eventRange = seg.eventRange;\n    var origRange = eventRange.range;\n    var slicedRange = intersectRanges(origRange, {\n        start: cells[spanStart].date,\n        end: addDays(cells[spanEnd - 1].date, 1),\n    });\n    return __assign(__assign({}, seg), { firstCol: spanStart, lastCol: spanEnd - 1, eventRange: {\n            def: eventRange.def,\n            ui: __assign(__assign({}, eventRange.ui), { durationEditable: false }),\n            instance: eventRange.instance,\n            range: slicedRange,\n        }, isStart: seg.isStart && slicedRange.start.valueOf() === origRange.start.valueOf(), isEnd: seg.isEnd && slicedRange.end.valueOf() === origRange.end.valueOf() });\n}\nvar DayGridSegHierarchy = /** @class */ (function (_super) {\n    __extends(DayGridSegHierarchy, _super);\n    function DayGridSegHierarchy() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        // config\n        _this.hiddenConsumes = false;\n        // allows us to keep hidden entries in the hierarchy so they take up space\n        _this.forceHidden = {};\n        return _this;\n    }\n    DayGridSegHierarchy.prototype.addSegs = function (segInputs) {\n        var _this = this;\n        var hiddenSegs = _super.prototype.addSegs.call(this, segInputs);\n        var entriesByLevel = this.entriesByLevel;\n        var excludeHidden = function (entry) { return !_this.forceHidden[buildEntryKey(entry)]; };\n        // remove the forced-hidden segs\n        for (var level = 0; level < entriesByLevel.length; level += 1) {\n            entriesByLevel[level] = entriesByLevel[level].filter(excludeHidden);\n        }\n        return hiddenSegs;\n    };\n    DayGridSegHierarchy.prototype.handleInvalidInsertion = function (insertion, entry, hiddenEntries) {\n        var _a = this, entriesByLevel = _a.entriesByLevel, forceHidden = _a.forceHidden;\n        var touchingEntry = insertion.touchingEntry, touchingLevel = insertion.touchingLevel, touchingLateral = insertion.touchingLateral;\n        if (this.hiddenConsumes && touchingEntry) {\n            var touchingEntryId = buildEntryKey(touchingEntry);\n            // if not already hidden\n            if (!forceHidden[touchingEntryId]) {\n                if (this.allowReslicing) {\n                    var placeholderEntry = __assign(__assign({}, touchingEntry), { span: intersectSpans(touchingEntry.span, entry.span) });\n                    var placeholderEntryId = buildEntryKey(placeholderEntry);\n                    forceHidden[placeholderEntryId] = true;\n                    entriesByLevel[touchingLevel][touchingLateral] = placeholderEntry; // replace touchingEntry with our placeholder\n                    this.splitEntry(touchingEntry, entry, hiddenEntries); // split up the touchingEntry, reinsert it\n                }\n                else {\n                    forceHidden[touchingEntryId] = true;\n                    hiddenEntries.push(touchingEntry);\n                }\n            }\n        }\n        return _super.prototype.handleInvalidInsertion.call(this, insertion, entry, hiddenEntries);\n    };\n    return DayGridSegHierarchy;\n}(SegHierarchy));\n\nvar TableRow = /** @class */ (function (_super) {\n    __extends(TableRow, _super);\n    function TableRow() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.cellElRefs = new RefMap(); // the <td>\n        _this.frameElRefs = new RefMap(); // the fc-daygrid-day-frame\n        _this.fgElRefs = new RefMap(); // the fc-daygrid-day-events\n        _this.segHarnessRefs = new RefMap(); // indexed by \"instanceId:firstCol\"\n        _this.rootElRef = createRef();\n        _this.state = {\n            framePositions: null,\n            maxContentHeight: null,\n            eventInstanceHeights: {},\n        };\n        return _this;\n    }\n    TableRow.prototype.render = function () {\n        var _this = this;\n        var _a = this, props = _a.props, state = _a.state, context = _a.context;\n        var options = context.options;\n        var colCnt = props.cells.length;\n        var businessHoursByCol = splitSegsByFirstCol(props.businessHourSegs, colCnt);\n        var bgEventSegsByCol = splitSegsByFirstCol(props.bgEventSegs, colCnt);\n        var highlightSegsByCol = splitSegsByFirstCol(this.getHighlightSegs(), colCnt);\n        var mirrorSegsByCol = splitSegsByFirstCol(this.getMirrorSegs(), colCnt);\n        var _b = computeFgSegPlacement(sortEventSegs(props.fgEventSegs, options.eventOrder), props.dayMaxEvents, props.dayMaxEventRows, options.eventOrderStrict, state.eventInstanceHeights, state.maxContentHeight, props.cells), singleColPlacements = _b.singleColPlacements, multiColPlacements = _b.multiColPlacements, moreCnts = _b.moreCnts, moreMarginTops = _b.moreMarginTops;\n        var isForcedInvisible = // TODO: messy way to compute this\n         (props.eventDrag && props.eventDrag.affectedInstances) ||\n            (props.eventResize && props.eventResize.affectedInstances) ||\n            {};\n        return (createElement(\"tr\", { ref: this.rootElRef, role: \"row\" },\n            props.renderIntro && props.renderIntro(),\n            props.cells.map(function (cell, col) {\n                var normalFgNodes = _this.renderFgSegs(col, props.forPrint ? singleColPlacements[col] : multiColPlacements[col], props.todayRange, isForcedInvisible);\n                var mirrorFgNodes = _this.renderFgSegs(col, buildMirrorPlacements(mirrorSegsByCol[col], multiColPlacements), props.todayRange, {}, Boolean(props.eventDrag), Boolean(props.eventResize), false);\n                return (createElement(TableCell, { key: cell.key, elRef: _this.cellElRefs.createRef(cell.key), innerElRef: _this.frameElRefs.createRef(cell.key) /* FF <td> problem, but okay to use for left/right. TODO: rename prop */, dateProfile: props.dateProfile, date: cell.date, showDayNumber: props.showDayNumbers, showWeekNumber: props.showWeekNumbers && col === 0, forceDayTop: props.showWeekNumbers /* even displaying weeknum for row, not necessarily day */, todayRange: props.todayRange, eventSelection: props.eventSelection, eventDrag: props.eventDrag, eventResize: props.eventResize, extraHookProps: cell.extraHookProps, extraDataAttrs: cell.extraDataAttrs, extraClassNames: cell.extraClassNames, extraDateSpan: cell.extraDateSpan, moreCnt: moreCnts[col], moreMarginTop: moreMarginTops[col], singlePlacements: singleColPlacements[col], fgContentElRef: _this.fgElRefs.createRef(cell.key), fgContent: ( // Fragment scopes the keys\n                    createElement(Fragment, null,\n                        createElement(Fragment, null, normalFgNodes),\n                        createElement(Fragment, null, mirrorFgNodes))), bgContent: ( // Fragment scopes the keys\n                    createElement(Fragment, null,\n                        _this.renderFillSegs(highlightSegsByCol[col], 'highlight'),\n                        _this.renderFillSegs(businessHoursByCol[col], 'non-business'),\n                        _this.renderFillSegs(bgEventSegsByCol[col], 'bg-event'))) }));\n            })));\n    };\n    TableRow.prototype.componentDidMount = function () {\n        this.updateSizing(true);\n    };\n    TableRow.prototype.componentDidUpdate = function (prevProps, prevState) {\n        var currentProps = this.props;\n        this.updateSizing(!isPropsEqual(prevProps, currentProps));\n    };\n    TableRow.prototype.getHighlightSegs = function () {\n        var props = this.props;\n        if (props.eventDrag && props.eventDrag.segs.length) { // messy check\n            return props.eventDrag.segs;\n        }\n        if (props.eventResize && props.eventResize.segs.length) { // messy check\n            return props.eventResize.segs;\n        }\n        return props.dateSelectionSegs;\n    };\n    TableRow.prototype.getMirrorSegs = function () {\n        var props = this.props;\n        if (props.eventResize && props.eventResize.segs.length) { // messy check\n            return props.eventResize.segs;\n        }\n        return [];\n    };\n    TableRow.prototype.renderFgSegs = function (col, segPlacements, todayRange, isForcedInvisible, isDragging, isResizing, isDateSelecting) {\n        var context = this.context;\n        var eventSelection = this.props.eventSelection;\n        var framePositions = this.state.framePositions;\n        var defaultDisplayEventEnd = this.props.cells.length === 1; // colCnt === 1\n        var isMirror = isDragging || isResizing || isDateSelecting;\n        var nodes = [];\n        if (framePositions) {\n            for (var _i = 0, segPlacements_1 = segPlacements; _i < segPlacements_1.length; _i++) {\n                var placement = segPlacements_1[_i];\n                var seg = placement.seg;\n                var instanceId = seg.eventRange.instance.instanceId;\n                var key = instanceId + ':' + col;\n                var isVisible = placement.isVisible && !isForcedInvisible[instanceId];\n                var isAbsolute = placement.isAbsolute;\n                var left = '';\n                var right = '';\n                if (isAbsolute) {\n                    if (context.isRtl) {\n                        right = 0;\n                        left = framePositions.lefts[seg.lastCol] - framePositions.lefts[seg.firstCol];\n                    }\n                    else {\n                        left = 0;\n                        right = framePositions.rights[seg.firstCol] - framePositions.rights[seg.lastCol];\n                    }\n                }\n                /*\n                known bug: events that are force to be list-item but span multiple days still take up space in later columns\n                todo: in print view, for multi-day events, don't display title within non-start/end segs\n                */\n                nodes.push(createElement(\"div\", { className: 'fc-daygrid-event-harness' + (isAbsolute ? ' fc-daygrid-event-harness-abs' : ''), key: key, ref: isMirror ? null : this.segHarnessRefs.createRef(key), style: {\n                        visibility: isVisible ? '' : 'hidden',\n                        marginTop: isAbsolute ? '' : placement.marginTop,\n                        top: isAbsolute ? placement.absoluteTop : '',\n                        left: left,\n                        right: right,\n                    } }, hasListItemDisplay(seg) ? (createElement(TableListItemEvent, __assign({ seg: seg, isDragging: isDragging, isSelected: instanceId === eventSelection, defaultDisplayEventEnd: defaultDisplayEventEnd }, getSegMeta(seg, todayRange)))) : (createElement(TableBlockEvent, __assign({ seg: seg, isDragging: isDragging, isResizing: isResizing, isDateSelecting: isDateSelecting, isSelected: instanceId === eventSelection, defaultDisplayEventEnd: defaultDisplayEventEnd }, getSegMeta(seg, todayRange))))));\n            }\n        }\n        return nodes;\n    };\n    TableRow.prototype.renderFillSegs = function (segs, fillType) {\n        var isRtl = this.context.isRtl;\n        var todayRange = this.props.todayRange;\n        var framePositions = this.state.framePositions;\n        var nodes = [];\n        if (framePositions) {\n            for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n                var seg = segs_1[_i];\n                var leftRightCss = isRtl ? {\n                    right: 0,\n                    left: framePositions.lefts[seg.lastCol] - framePositions.lefts[seg.firstCol],\n                } : {\n                    left: 0,\n                    right: framePositions.rights[seg.firstCol] - framePositions.rights[seg.lastCol],\n                };\n                nodes.push(createElement(\"div\", { key: buildEventRangeKey(seg.eventRange), className: \"fc-daygrid-bg-harness\", style: leftRightCss }, fillType === 'bg-event' ?\n                    createElement(BgEvent, __assign({ seg: seg }, getSegMeta(seg, todayRange))) :\n                    renderFill(fillType)));\n            }\n        }\n        return createElement.apply(void 0, __spreadArray([Fragment, {}], nodes));\n    };\n    TableRow.prototype.updateSizing = function (isExternalSizingChange) {\n        var _a = this, props = _a.props, frameElRefs = _a.frameElRefs;\n        if (!props.forPrint &&\n            props.clientWidth !== null // positioning ready?\n        ) {\n            if (isExternalSizingChange) {\n                var frameEls = props.cells.map(function (cell) { return frameElRefs.currentMap[cell.key]; });\n                if (frameEls.length) {\n                    var originEl = this.rootElRef.current;\n                    this.setState({\n                        framePositions: new PositionCache(originEl, frameEls, true, // isHorizontal\n                        false),\n                    });\n                }\n            }\n            var oldInstanceHeights = this.state.eventInstanceHeights;\n            var newInstanceHeights = this.queryEventInstanceHeights();\n            var limitByContentHeight = props.dayMaxEvents === true || props.dayMaxEventRows === true;\n            this.setState({\n                // HACK to prevent oscillations of events being shown/hidden from max-event-rows\n                // Essentially, once you compute an element's height, never null-out.\n                // TODO: always display all events, as visibility:hidden?\n                eventInstanceHeights: __assign(__assign({}, oldInstanceHeights), newInstanceHeights),\n                maxContentHeight: limitByContentHeight ? this.computeMaxContentHeight() : null,\n            });\n        }\n    };\n    TableRow.prototype.queryEventInstanceHeights = function () {\n        var segElMap = this.segHarnessRefs.currentMap;\n        var eventInstanceHeights = {};\n        // get the max height amongst instance segs\n        for (var key in segElMap) {\n            var height = Math.round(segElMap[key].getBoundingClientRect().height);\n            var instanceId = key.split(':')[0]; // deconstruct how renderFgSegs makes the key\n            eventInstanceHeights[instanceId] = Math.max(eventInstanceHeights[instanceId] || 0, height);\n        }\n        return eventInstanceHeights;\n    };\n    TableRow.prototype.computeMaxContentHeight = function () {\n        var firstKey = this.props.cells[0].key;\n        var cellEl = this.cellElRefs.currentMap[firstKey];\n        var fcContainerEl = this.fgElRefs.currentMap[firstKey];\n        return cellEl.getBoundingClientRect().bottom - fcContainerEl.getBoundingClientRect().top;\n    };\n    TableRow.prototype.getCellEls = function () {\n        var elMap = this.cellElRefs.currentMap;\n        return this.props.cells.map(function (cell) { return elMap[cell.key]; });\n    };\n    return TableRow;\n}(DateComponent));\nTableRow.addStateEquality({\n    eventInstanceHeights: isPropsEqual,\n});\nfunction buildMirrorPlacements(mirrorSegs, colPlacements) {\n    if (!mirrorSegs.length) {\n        return [];\n    }\n    var topsByInstanceId = buildAbsoluteTopHash(colPlacements); // TODO: cache this at first render?\n    return mirrorSegs.map(function (seg) { return ({\n        seg: seg,\n        isVisible: true,\n        isAbsolute: true,\n        absoluteTop: topsByInstanceId[seg.eventRange.instance.instanceId],\n        marginTop: 0,\n    }); });\n}\nfunction buildAbsoluteTopHash(colPlacements) {\n    var topsByInstanceId = {};\n    for (var _i = 0, colPlacements_1 = colPlacements; _i < colPlacements_1.length; _i++) {\n        var placements = colPlacements_1[_i];\n        for (var _a = 0, placements_1 = placements; _a < placements_1.length; _a++) {\n            var placement = placements_1[_a];\n            topsByInstanceId[placement.seg.eventRange.instance.instanceId] = placement.absoluteTop;\n        }\n    }\n    return topsByInstanceId;\n}\n\nvar Table = /** @class */ (function (_super) {\n    __extends(Table, _super);\n    function Table() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.splitBusinessHourSegs = memoize(splitSegsByRow);\n        _this.splitBgEventSegs = memoize(splitSegsByRow);\n        _this.splitFgEventSegs = memoize(splitSegsByRow);\n        _this.splitDateSelectionSegs = memoize(splitSegsByRow);\n        _this.splitEventDrag = memoize(splitInteractionByRow);\n        _this.splitEventResize = memoize(splitInteractionByRow);\n        _this.rowRefs = new RefMap();\n        _this.handleRootEl = function (rootEl) {\n            _this.rootEl = rootEl;\n            if (rootEl) {\n                _this.context.registerInteractiveComponent(_this, {\n                    el: rootEl,\n                    isHitComboAllowed: _this.props.isHitComboAllowed,\n                });\n            }\n            else {\n                _this.context.unregisterInteractiveComponent(_this);\n            }\n        };\n        return _this;\n    }\n    Table.prototype.render = function () {\n        var _this = this;\n        var props = this.props;\n        var dateProfile = props.dateProfile, dayMaxEventRows = props.dayMaxEventRows, dayMaxEvents = props.dayMaxEvents, expandRows = props.expandRows;\n        var rowCnt = props.cells.length;\n        var businessHourSegsByRow = this.splitBusinessHourSegs(props.businessHourSegs, rowCnt);\n        var bgEventSegsByRow = this.splitBgEventSegs(props.bgEventSegs, rowCnt);\n        var fgEventSegsByRow = this.splitFgEventSegs(props.fgEventSegs, rowCnt);\n        var dateSelectionSegsByRow = this.splitDateSelectionSegs(props.dateSelectionSegs, rowCnt);\n        var eventDragByRow = this.splitEventDrag(props.eventDrag, rowCnt);\n        var eventResizeByRow = this.splitEventResize(props.eventResize, rowCnt);\n        var limitViaBalanced = dayMaxEvents === true || dayMaxEventRows === true;\n        // if rows can't expand to fill fixed height, can't do balanced-height event limit\n        // TODO: best place to normalize these options?\n        if (limitViaBalanced && !expandRows) {\n            limitViaBalanced = false;\n            dayMaxEventRows = null;\n            dayMaxEvents = null;\n        }\n        var classNames = [\n            'fc-daygrid-body',\n            limitViaBalanced ? 'fc-daygrid-body-balanced' : 'fc-daygrid-body-unbalanced',\n            expandRows ? '' : 'fc-daygrid-body-natural', // will height of one row depend on the others?\n        ];\n        return (createElement(\"div\", { className: classNames.join(' '), ref: this.handleRootEl, style: {\n                // these props are important to give this wrapper correct dimensions for interactions\n                // TODO: if we set it here, can we avoid giving to inner tables?\n                width: props.clientWidth,\n                minWidth: props.tableMinWidth,\n            } },\n            createElement(NowTimer, { unit: \"day\" }, function (nowDate, todayRange) { return (createElement(Fragment, null,\n                createElement(\"table\", { role: \"presentation\", className: \"fc-scrollgrid-sync-table\", style: {\n                        width: props.clientWidth,\n                        minWidth: props.tableMinWidth,\n                        height: expandRows ? props.clientHeight : '',\n                    } },\n                    props.colGroupNode,\n                    createElement(\"tbody\", { role: \"presentation\" }, props.cells.map(function (cells, row) { return (createElement(TableRow, { ref: _this.rowRefs.createRef(row), key: cells.length\n                            ? cells[0].date.toISOString() /* best? or put key on cell? or use diff formatter? */\n                            : row // in case there are no cells (like when resource view is loading)\n                        , showDayNumbers: rowCnt > 1, showWeekNumbers: props.showWeekNumbers, todayRange: todayRange, dateProfile: dateProfile, cells: cells, renderIntro: props.renderRowIntro, businessHourSegs: businessHourSegsByRow[row], eventSelection: props.eventSelection, bgEventSegs: bgEventSegsByRow[row].filter(isSegAllDay) /* hack */, fgEventSegs: fgEventSegsByRow[row], dateSelectionSegs: dateSelectionSegsByRow[row], eventDrag: eventDragByRow[row], eventResize: eventResizeByRow[row], dayMaxEvents: dayMaxEvents, dayMaxEventRows: dayMaxEventRows, clientWidth: props.clientWidth, clientHeight: props.clientHeight, forPrint: props.forPrint })); }))))); })));\n    };\n    // Hit System\n    // ----------------------------------------------------------------------------------------------------\n    Table.prototype.prepareHits = function () {\n        this.rowPositions = new PositionCache(this.rootEl, this.rowRefs.collect().map(function (rowObj) { return rowObj.getCellEls()[0]; }), // first cell el in each row. TODO: not optimal\n        false, true);\n        this.colPositions = new PositionCache(this.rootEl, this.rowRefs.currentMap[0].getCellEls(), // cell els in first row\n        true, // horizontal\n        false);\n    };\n    Table.prototype.queryHit = function (positionLeft, positionTop) {\n        var _a = this, colPositions = _a.colPositions, rowPositions = _a.rowPositions;\n        var col = colPositions.leftToIndex(positionLeft);\n        var row = rowPositions.topToIndex(positionTop);\n        if (row != null && col != null) {\n            var cell = this.props.cells[row][col];\n            return {\n                dateProfile: this.props.dateProfile,\n                dateSpan: __assign({ range: this.getCellRange(row, col), allDay: true }, cell.extraDateSpan),\n                dayEl: this.getCellEl(row, col),\n                rect: {\n                    left: colPositions.lefts[col],\n                    right: colPositions.rights[col],\n                    top: rowPositions.tops[row],\n                    bottom: rowPositions.bottoms[row],\n                },\n                layer: 0,\n            };\n        }\n        return null;\n    };\n    Table.prototype.getCellEl = function (row, col) {\n        return this.rowRefs.currentMap[row].getCellEls()[col]; // TODO: not optimal\n    };\n    Table.prototype.getCellRange = function (row, col) {\n        var start = this.props.cells[row][col].date;\n        var end = addDays(start, 1);\n        return { start: start, end: end };\n    };\n    return Table;\n}(DateComponent));\nfunction isSegAllDay(seg) {\n    return seg.eventRange.def.allDay;\n}\n\nvar DayTableSlicer = /** @class */ (function (_super) {\n    __extends(DayTableSlicer, _super);\n    function DayTableSlicer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.forceDayIfListItem = true;\n        return _this;\n    }\n    DayTableSlicer.prototype.sliceRange = function (dateRange, dayTableModel) {\n        return dayTableModel.sliceRange(dateRange);\n    };\n    return DayTableSlicer;\n}(Slicer));\n\nvar DayTable = /** @class */ (function (_super) {\n    __extends(DayTable, _super);\n    function DayTable() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.slicer = new DayTableSlicer();\n        _this.tableRef = createRef();\n        return _this;\n    }\n    DayTable.prototype.render = function () {\n        var _a = this, props = _a.props, context = _a.context;\n        return (createElement(Table, __assign({ ref: this.tableRef }, this.slicer.sliceProps(props, props.dateProfile, props.nextDayThreshold, context, props.dayTableModel), { dateProfile: props.dateProfile, cells: props.dayTableModel.cells, colGroupNode: props.colGroupNode, tableMinWidth: props.tableMinWidth, renderRowIntro: props.renderRowIntro, dayMaxEvents: props.dayMaxEvents, dayMaxEventRows: props.dayMaxEventRows, showWeekNumbers: props.showWeekNumbers, expandRows: props.expandRows, headerAlignElRef: props.headerAlignElRef, clientWidth: props.clientWidth, clientHeight: props.clientHeight, forPrint: props.forPrint })));\n    };\n    return DayTable;\n}(DateComponent));\n\nvar DayTableView = /** @class */ (function (_super) {\n    __extends(DayTableView, _super);\n    function DayTableView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.buildDayTableModel = memoize(buildDayTableModel);\n        _this.headerRef = createRef();\n        _this.tableRef = createRef();\n        return _this;\n    }\n    DayTableView.prototype.render = function () {\n        var _this = this;\n        var _a = this.context, options = _a.options, dateProfileGenerator = _a.dateProfileGenerator;\n        var props = this.props;\n        var dayTableModel = this.buildDayTableModel(props.dateProfile, dateProfileGenerator);\n        var headerContent = options.dayHeaders && (createElement(DayHeader, { ref: this.headerRef, dateProfile: props.dateProfile, dates: dayTableModel.headerDates, datesRepDistinctDays: dayTableModel.rowCnt === 1 }));\n        var bodyContent = function (contentArg) { return (createElement(DayTable, { ref: _this.tableRef, dateProfile: props.dateProfile, dayTableModel: dayTableModel, businessHours: props.businessHours, dateSelection: props.dateSelection, eventStore: props.eventStore, eventUiBases: props.eventUiBases, eventSelection: props.eventSelection, eventDrag: props.eventDrag, eventResize: props.eventResize, nextDayThreshold: options.nextDayThreshold, colGroupNode: contentArg.tableColGroupNode, tableMinWidth: contentArg.tableMinWidth, dayMaxEvents: options.dayMaxEvents, dayMaxEventRows: options.dayMaxEventRows, showWeekNumbers: options.weekNumbers, expandRows: !props.isHeightAuto, headerAlignElRef: _this.headerElRef, clientWidth: contentArg.clientWidth, clientHeight: contentArg.clientHeight, forPrint: props.forPrint })); };\n        return options.dayMinWidth\n            ? this.renderHScrollLayout(headerContent, bodyContent, dayTableModel.colCnt, options.dayMinWidth)\n            : this.renderSimpleLayout(headerContent, bodyContent);\n    };\n    return DayTableView;\n}(TableView));\nfunction buildDayTableModel(dateProfile, dateProfileGenerator) {\n    var daySeries = new DaySeriesModel(dateProfile.renderRange, dateProfileGenerator);\n    return new DayTableModel(daySeries, /year|month|week/.test(dateProfile.currentRangeUnit));\n}\n\nvar TableDateProfileGenerator = /** @class */ (function (_super) {\n    __extends(TableDateProfileGenerator, _super);\n    function TableDateProfileGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // Computes the date range that will be rendered.\n    TableDateProfileGenerator.prototype.buildRenderRange = function (currentRange, currentRangeUnit, isRangeAllDay) {\n        var dateEnv = this.props.dateEnv;\n        var renderRange = _super.prototype.buildRenderRange.call(this, currentRange, currentRangeUnit, isRangeAllDay);\n        var start = renderRange.start;\n        var end = renderRange.end;\n        var endOfWeek;\n        // year and month views should be aligned with weeks. this is already done for week\n        if (/^(year|month)$/.test(currentRangeUnit)) {\n            start = dateEnv.startOfWeek(start);\n            // make end-of-week if not already\n            endOfWeek = dateEnv.startOfWeek(end);\n            if (endOfWeek.valueOf() !== end.valueOf()) {\n                end = addWeeks(endOfWeek, 1);\n            }\n        }\n        // ensure 6 weeks\n        if (this.props.monthMode &&\n            this.props.fixedWeekCount) {\n            var rowCnt = Math.ceil(// could be partial weeks due to hiddenDays\n            diffWeeks(start, end));\n            end = addWeeks(end, 6 - rowCnt);\n        }\n        return { start: start, end: end };\n    };\n    return TableDateProfileGenerator;\n}(DateProfileGenerator));\n\nvar main = createPlugin({\n    initialView: 'dayGridMonth',\n    views: {\n        dayGrid: {\n            component: DayTableView,\n            dateProfileGeneratorClass: TableDateProfileGenerator,\n        },\n        dayGridDay: {\n            type: 'dayGrid',\n            duration: { days: 1 },\n        },\n        dayGridWeek: {\n            type: 'dayGrid',\n            duration: { weeks: 1 },\n        },\n        dayGridMonth: {\n            type: 'dayGrid',\n            duration: { months: 1 },\n            monthMode: true,\n            fixedWeekCount: true,\n        },\n    },\n});\n\nexport default main;\nexport { DayTableView as DayGridView, DayTable, DayTableSlicer, Table, TableView, buildDayTableModel };\n","/*!\nFullCalendar v5.10.1\nDocs & License: https://fullcalendar.io/\n(c) 2021 Adam Shaw\n*/\nimport { config, elementClosest, Emitter, applyStyle, whenTransitionDone, removeElement, ScrollController, ElementScrollController, computeInnerRect, WindowScrollController, getElRoot, preventSelection, preventContextMenu, allowSelection, allowContextMenu, ElementDragging, computeRect, getClippingParents, pointInsideRect, isDateSpansEqual, constrainPoint, intersectRects, getRectCenter, diffPoints, mapHash, rangeContainsRange, interactionSettingsToStore, Interaction, isDateSelectionValid, enableCursor, disableCursor, triggerDateSelect, compareNumbers, getElSeg, getRelevantEvents, EventApi, createEmptyEventStore, applyMutationToEventStore, isInteractionValid, buildEventApis, interactionSettingsStore, startOfDay, diffDates, createDuration, getEventTargetViaRoot, identity, eventTupleToStore, parseDragMeta, elementMatches, refineEventDef, parseEventDef, getDefaultEventEnd, createEventInstance, BASE_OPTION_DEFAULTS, createPlugin } from '@fullcalendar/common';\nimport { __extends, __assign } from 'tslib';\n\nconfig.touchMouseIgnoreWait = 500;\nvar ignoreMouseDepth = 0;\nvar listenerCnt = 0;\nvar isWindowTouchMoveCancelled = false;\n/*\nUses a \"pointer\" abstraction, which monitors UI events for both mouse and touch.\nTracks when the pointer \"drags\" on a certain element, meaning down+move+up.\n\nAlso, tracks if there was touch-scrolling.\nAlso, can prevent touch-scrolling from happening.\nAlso, can fire pointermove events when scrolling happens underneath, even when no real pointer movement.\n\nemits:\n- pointerdown\n- pointermove\n- pointerup\n*/\nvar PointerDragging = /** @class */ (function () {\n    function PointerDragging(containerEl) {\n        var _this = this;\n        this.subjectEl = null;\n        // options that can be directly assigned by caller\n        this.selector = ''; // will cause subjectEl in all emitted events to be this element\n        this.handleSelector = '';\n        this.shouldIgnoreMove = false;\n        this.shouldWatchScroll = true; // for simulating pointermove on scroll\n        // internal states\n        this.isDragging = false;\n        this.isTouchDragging = false;\n        this.wasTouchScroll = false;\n        // Mouse\n        // ----------------------------------------------------------------------------------------------------\n        this.handleMouseDown = function (ev) {\n            if (!_this.shouldIgnoreMouse() &&\n                isPrimaryMouseButton(ev) &&\n                _this.tryStart(ev)) {\n                var pev = _this.createEventFromMouse(ev, true);\n                _this.emitter.trigger('pointerdown', pev);\n                _this.initScrollWatch(pev);\n                if (!_this.shouldIgnoreMove) {\n                    document.addEventListener('mousemove', _this.handleMouseMove);\n                }\n                document.addEventListener('mouseup', _this.handleMouseUp);\n            }\n        };\n        this.handleMouseMove = function (ev) {\n            var pev = _this.createEventFromMouse(ev);\n            _this.recordCoords(pev);\n            _this.emitter.trigger('pointermove', pev);\n        };\n        this.handleMouseUp = function (ev) {\n            document.removeEventListener('mousemove', _this.handleMouseMove);\n            document.removeEventListener('mouseup', _this.handleMouseUp);\n            _this.emitter.trigger('pointerup', _this.createEventFromMouse(ev));\n            _this.cleanup(); // call last so that pointerup has access to props\n        };\n        // Touch\n        // ----------------------------------------------------------------------------------------------------\n        this.handleTouchStart = function (ev) {\n            if (_this.tryStart(ev)) {\n                _this.isTouchDragging = true;\n                var pev = _this.createEventFromTouch(ev, true);\n                _this.emitter.trigger('pointerdown', pev);\n                _this.initScrollWatch(pev);\n                // unlike mouse, need to attach to target, not document\n                // https://stackoverflow.com/a/45760014\n                var targetEl = ev.target;\n                if (!_this.shouldIgnoreMove) {\n                    targetEl.addEventListener('touchmove', _this.handleTouchMove);\n                }\n                targetEl.addEventListener('touchend', _this.handleTouchEnd);\n                targetEl.addEventListener('touchcancel', _this.handleTouchEnd); // treat it as a touch end\n                // attach a handler to get called when ANY scroll action happens on the page.\n                // this was impossible to do with normal on/off because 'scroll' doesn't bubble.\n                // http://stackoverflow.com/a/32954565/96342\n                window.addEventListener('scroll', _this.handleTouchScroll, true);\n            }\n        };\n        this.handleTouchMove = function (ev) {\n            var pev = _this.createEventFromTouch(ev);\n            _this.recordCoords(pev);\n            _this.emitter.trigger('pointermove', pev);\n        };\n        this.handleTouchEnd = function (ev) {\n            if (_this.isDragging) { // done to guard against touchend followed by touchcancel\n                var targetEl = ev.target;\n                targetEl.removeEventListener('touchmove', _this.handleTouchMove);\n                targetEl.removeEventListener('touchend', _this.handleTouchEnd);\n                targetEl.removeEventListener('touchcancel', _this.handleTouchEnd);\n                window.removeEventListener('scroll', _this.handleTouchScroll, true); // useCaptured=true\n                _this.emitter.trigger('pointerup', _this.createEventFromTouch(ev));\n                _this.cleanup(); // call last so that pointerup has access to props\n                _this.isTouchDragging = false;\n                startIgnoringMouse();\n            }\n        };\n        this.handleTouchScroll = function () {\n            _this.wasTouchScroll = true;\n        };\n        this.handleScroll = function (ev) {\n            if (!_this.shouldIgnoreMove) {\n                var pageX = (window.pageXOffset - _this.prevScrollX) + _this.prevPageX;\n                var pageY = (window.pageYOffset - _this.prevScrollY) + _this.prevPageY;\n                _this.emitter.trigger('pointermove', {\n                    origEvent: ev,\n                    isTouch: _this.isTouchDragging,\n                    subjectEl: _this.subjectEl,\n                    pageX: pageX,\n                    pageY: pageY,\n                    deltaX: pageX - _this.origPageX,\n                    deltaY: pageY - _this.origPageY,\n                });\n            }\n        };\n        this.containerEl = containerEl;\n        this.emitter = new Emitter();\n        containerEl.addEventListener('mousedown', this.handleMouseDown);\n        containerEl.addEventListener('touchstart', this.handleTouchStart, { passive: true });\n        listenerCreated();\n    }\n    PointerDragging.prototype.destroy = function () {\n        this.containerEl.removeEventListener('mousedown', this.handleMouseDown);\n        this.containerEl.removeEventListener('touchstart', this.handleTouchStart, { passive: true });\n        listenerDestroyed();\n    };\n    PointerDragging.prototype.tryStart = function (ev) {\n        var subjectEl = this.querySubjectEl(ev);\n        var downEl = ev.target;\n        if (subjectEl &&\n            (!this.handleSelector || elementClosest(downEl, this.handleSelector))) {\n            this.subjectEl = subjectEl;\n            this.isDragging = true; // do this first so cancelTouchScroll will work\n            this.wasTouchScroll = false;\n            return true;\n        }\n        return false;\n    };\n    PointerDragging.prototype.cleanup = function () {\n        isWindowTouchMoveCancelled = false;\n        this.isDragging = false;\n        this.subjectEl = null;\n        // keep wasTouchScroll around for later access\n        this.destroyScrollWatch();\n    };\n    PointerDragging.prototype.querySubjectEl = function (ev) {\n        if (this.selector) {\n            return elementClosest(ev.target, this.selector);\n        }\n        return this.containerEl;\n    };\n    PointerDragging.prototype.shouldIgnoreMouse = function () {\n        return ignoreMouseDepth || this.isTouchDragging;\n    };\n    // can be called by user of this class, to cancel touch-based scrolling for the current drag\n    PointerDragging.prototype.cancelTouchScroll = function () {\n        if (this.isDragging) {\n            isWindowTouchMoveCancelled = true;\n        }\n    };\n    // Scrolling that simulates pointermoves\n    // ----------------------------------------------------------------------------------------------------\n    PointerDragging.prototype.initScrollWatch = function (ev) {\n        if (this.shouldWatchScroll) {\n            this.recordCoords(ev);\n            window.addEventListener('scroll', this.handleScroll, true); // useCapture=true\n        }\n    };\n    PointerDragging.prototype.recordCoords = function (ev) {\n        if (this.shouldWatchScroll) {\n            this.prevPageX = ev.pageX;\n            this.prevPageY = ev.pageY;\n            this.prevScrollX = window.pageXOffset;\n            this.prevScrollY = window.pageYOffset;\n        }\n    };\n    PointerDragging.prototype.destroyScrollWatch = function () {\n        if (this.shouldWatchScroll) {\n            window.removeEventListener('scroll', this.handleScroll, true); // useCaptured=true\n        }\n    };\n    // Event Normalization\n    // ----------------------------------------------------------------------------------------------------\n    PointerDragging.prototype.createEventFromMouse = function (ev, isFirst) {\n        var deltaX = 0;\n        var deltaY = 0;\n        // TODO: repeat code\n        if (isFirst) {\n            this.origPageX = ev.pageX;\n            this.origPageY = ev.pageY;\n        }\n        else {\n            deltaX = ev.pageX - this.origPageX;\n            deltaY = ev.pageY - this.origPageY;\n        }\n        return {\n            origEvent: ev,\n            isTouch: false,\n            subjectEl: this.subjectEl,\n            pageX: ev.pageX,\n            pageY: ev.pageY,\n            deltaX: deltaX,\n            deltaY: deltaY,\n        };\n    };\n    PointerDragging.prototype.createEventFromTouch = function (ev, isFirst) {\n        var touches = ev.touches;\n        var pageX;\n        var pageY;\n        var deltaX = 0;\n        var deltaY = 0;\n        // if touch coords available, prefer,\n        // because FF would give bad ev.pageX ev.pageY\n        if (touches && touches.length) {\n            pageX = touches[0].pageX;\n            pageY = touches[0].pageY;\n        }\n        else {\n            pageX = ev.pageX;\n            pageY = ev.pageY;\n        }\n        // TODO: repeat code\n        if (isFirst) {\n            this.origPageX = pageX;\n            this.origPageY = pageY;\n        }\n        else {\n            deltaX = pageX - this.origPageX;\n            deltaY = pageY - this.origPageY;\n        }\n        return {\n            origEvent: ev,\n            isTouch: true,\n            subjectEl: this.subjectEl,\n            pageX: pageX,\n            pageY: pageY,\n            deltaX: deltaX,\n            deltaY: deltaY,\n        };\n    };\n    return PointerDragging;\n}());\n// Returns a boolean whether this was a left mouse click and no ctrl key (which means right click on Mac)\nfunction isPrimaryMouseButton(ev) {\n    return ev.button === 0 && !ev.ctrlKey;\n}\n// Ignoring fake mouse events generated by touch\n// ----------------------------------------------------------------------------------------------------\nfunction startIgnoringMouse() {\n    ignoreMouseDepth += 1;\n    setTimeout(function () {\n        ignoreMouseDepth -= 1;\n    }, config.touchMouseIgnoreWait);\n}\n// We want to attach touchmove as early as possible for Safari\n// ----------------------------------------------------------------------------------------------------\nfunction listenerCreated() {\n    listenerCnt += 1;\n    if (listenerCnt === 1) {\n        window.addEventListener('touchmove', onWindowTouchMove, { passive: false });\n    }\n}\nfunction listenerDestroyed() {\n    listenerCnt -= 1;\n    if (!listenerCnt) {\n        window.removeEventListener('touchmove', onWindowTouchMove, { passive: false });\n    }\n}\nfunction onWindowTouchMove(ev) {\n    if (isWindowTouchMoveCancelled) {\n        ev.preventDefault();\n    }\n}\n\n/*\nAn effect in which an element follows the movement of a pointer across the screen.\nThe moving element is a clone of some other element.\nMust call start + handleMove + stop.\n*/\nvar ElementMirror = /** @class */ (function () {\n    function ElementMirror() {\n        this.isVisible = false; // must be explicitly enabled\n        this.sourceEl = null;\n        this.mirrorEl = null;\n        this.sourceElRect = null; // screen coords relative to viewport\n        // options that can be set directly by caller\n        this.parentNode = document.body; // HIGHLY SUGGESTED to set this to sidestep ShadowDOM issues\n        this.zIndex = 9999;\n        this.revertDuration = 0;\n    }\n    ElementMirror.prototype.start = function (sourceEl, pageX, pageY) {\n        this.sourceEl = sourceEl;\n        this.sourceElRect = this.sourceEl.getBoundingClientRect();\n        this.origScreenX = pageX - window.pageXOffset;\n        this.origScreenY = pageY - window.pageYOffset;\n        this.deltaX = 0;\n        this.deltaY = 0;\n        this.updateElPosition();\n    };\n    ElementMirror.prototype.handleMove = function (pageX, pageY) {\n        this.deltaX = (pageX - window.pageXOffset) - this.origScreenX;\n        this.deltaY = (pageY - window.pageYOffset) - this.origScreenY;\n        this.updateElPosition();\n    };\n    // can be called before start\n    ElementMirror.prototype.setIsVisible = function (bool) {\n        if (bool) {\n            if (!this.isVisible) {\n                if (this.mirrorEl) {\n                    this.mirrorEl.style.display = '';\n                }\n                this.isVisible = bool; // needs to happen before updateElPosition\n                this.updateElPosition(); // because was not updating the position while invisible\n            }\n        }\n        else if (this.isVisible) {\n            if (this.mirrorEl) {\n                this.mirrorEl.style.display = 'none';\n            }\n            this.isVisible = bool;\n        }\n    };\n    // always async\n    ElementMirror.prototype.stop = function (needsRevertAnimation, callback) {\n        var _this = this;\n        var done = function () {\n            _this.cleanup();\n            callback();\n        };\n        if (needsRevertAnimation &&\n            this.mirrorEl &&\n            this.isVisible &&\n            this.revertDuration && // if 0, transition won't work\n            (this.deltaX || this.deltaY) // if same coords, transition won't work\n        ) {\n            this.doRevertAnimation(done, this.revertDuration);\n        }\n        else {\n            setTimeout(done, 0);\n        }\n    };\n    ElementMirror.prototype.doRevertAnimation = function (callback, revertDuration) {\n        var mirrorEl = this.mirrorEl;\n        var finalSourceElRect = this.sourceEl.getBoundingClientRect(); // because autoscrolling might have happened\n        mirrorEl.style.transition =\n            'top ' + revertDuration + 'ms,' +\n                'left ' + revertDuration + 'ms';\n        applyStyle(mirrorEl, {\n            left: finalSourceElRect.left,\n            top: finalSourceElRect.top,\n        });\n        whenTransitionDone(mirrorEl, function () {\n            mirrorEl.style.transition = '';\n            callback();\n        });\n    };\n    ElementMirror.prototype.cleanup = function () {\n        if (this.mirrorEl) {\n            removeElement(this.mirrorEl);\n            this.mirrorEl = null;\n        }\n        this.sourceEl = null;\n    };\n    ElementMirror.prototype.updateElPosition = function () {\n        if (this.sourceEl && this.isVisible) {\n            applyStyle(this.getMirrorEl(), {\n                left: this.sourceElRect.left + this.deltaX,\n                top: this.sourceElRect.top + this.deltaY,\n            });\n        }\n    };\n    ElementMirror.prototype.getMirrorEl = function () {\n        var sourceElRect = this.sourceElRect;\n        var mirrorEl = this.mirrorEl;\n        if (!mirrorEl) {\n            mirrorEl = this.mirrorEl = this.sourceEl.cloneNode(true); // cloneChildren=true\n            // we don't want long taps or any mouse interaction causing selection/menus.\n            // would use preventSelection(), but that prevents selectstart, causing problems.\n            mirrorEl.classList.add('fc-unselectable');\n            mirrorEl.classList.add('fc-event-dragging');\n            applyStyle(mirrorEl, {\n                position: 'fixed',\n                zIndex: this.zIndex,\n                visibility: '',\n                boxSizing: 'border-box',\n                width: sourceElRect.right - sourceElRect.left,\n                height: sourceElRect.bottom - sourceElRect.top,\n                right: 'auto',\n                bottom: 'auto',\n                margin: 0,\n            });\n            this.parentNode.appendChild(mirrorEl);\n        }\n        return mirrorEl;\n    };\n    return ElementMirror;\n}());\n\n/*\nIs a cache for a given element's scroll information (all the info that ScrollController stores)\nin addition the \"client rectangle\" of the element.. the area within the scrollbars.\n\nThe cache can be in one of two modes:\n- doesListening:false - ignores when the container is scrolled by someone else\n- doesListening:true - watch for scrolling and update the cache\n*/\nvar ScrollGeomCache = /** @class */ (function (_super) {\n    __extends(ScrollGeomCache, _super);\n    function ScrollGeomCache(scrollController, doesListening) {\n        var _this = _super.call(this) || this;\n        _this.handleScroll = function () {\n            _this.scrollTop = _this.scrollController.getScrollTop();\n            _this.scrollLeft = _this.scrollController.getScrollLeft();\n            _this.handleScrollChange();\n        };\n        _this.scrollController = scrollController;\n        _this.doesListening = doesListening;\n        _this.scrollTop = _this.origScrollTop = scrollController.getScrollTop();\n        _this.scrollLeft = _this.origScrollLeft = scrollController.getScrollLeft();\n        _this.scrollWidth = scrollController.getScrollWidth();\n        _this.scrollHeight = scrollController.getScrollHeight();\n        _this.clientWidth = scrollController.getClientWidth();\n        _this.clientHeight = scrollController.getClientHeight();\n        _this.clientRect = _this.computeClientRect(); // do last in case it needs cached values\n        if (_this.doesListening) {\n            _this.getEventTarget().addEventListener('scroll', _this.handleScroll);\n        }\n        return _this;\n    }\n    ScrollGeomCache.prototype.destroy = function () {\n        if (this.doesListening) {\n            this.getEventTarget().removeEventListener('scroll', this.handleScroll);\n        }\n    };\n    ScrollGeomCache.prototype.getScrollTop = function () {\n        return this.scrollTop;\n    };\n    ScrollGeomCache.prototype.getScrollLeft = function () {\n        return this.scrollLeft;\n    };\n    ScrollGeomCache.prototype.setScrollTop = function (top) {\n        this.scrollController.setScrollTop(top);\n        if (!this.doesListening) {\n            // we are not relying on the element to normalize out-of-bounds scroll values\n            // so we need to sanitize ourselves\n            this.scrollTop = Math.max(Math.min(top, this.getMaxScrollTop()), 0);\n            this.handleScrollChange();\n        }\n    };\n    ScrollGeomCache.prototype.setScrollLeft = function (top) {\n        this.scrollController.setScrollLeft(top);\n        if (!this.doesListening) {\n            // we are not relying on the element to normalize out-of-bounds scroll values\n            // so we need to sanitize ourselves\n            this.scrollLeft = Math.max(Math.min(top, this.getMaxScrollLeft()), 0);\n            this.handleScrollChange();\n        }\n    };\n    ScrollGeomCache.prototype.getClientWidth = function () {\n        return this.clientWidth;\n    };\n    ScrollGeomCache.prototype.getClientHeight = function () {\n        return this.clientHeight;\n    };\n    ScrollGeomCache.prototype.getScrollWidth = function () {\n        return this.scrollWidth;\n    };\n    ScrollGeomCache.prototype.getScrollHeight = function () {\n        return this.scrollHeight;\n    };\n    ScrollGeomCache.prototype.handleScrollChange = function () {\n    };\n    return ScrollGeomCache;\n}(ScrollController));\n\nvar ElementScrollGeomCache = /** @class */ (function (_super) {\n    __extends(ElementScrollGeomCache, _super);\n    function ElementScrollGeomCache(el, doesListening) {\n        return _super.call(this, new ElementScrollController(el), doesListening) || this;\n    }\n    ElementScrollGeomCache.prototype.getEventTarget = function () {\n        return this.scrollController.el;\n    };\n    ElementScrollGeomCache.prototype.computeClientRect = function () {\n        return computeInnerRect(this.scrollController.el);\n    };\n    return ElementScrollGeomCache;\n}(ScrollGeomCache));\n\nvar WindowScrollGeomCache = /** @class */ (function (_super) {\n    __extends(WindowScrollGeomCache, _super);\n    function WindowScrollGeomCache(doesListening) {\n        return _super.call(this, new WindowScrollController(), doesListening) || this;\n    }\n    WindowScrollGeomCache.prototype.getEventTarget = function () {\n        return window;\n    };\n    WindowScrollGeomCache.prototype.computeClientRect = function () {\n        return {\n            left: this.scrollLeft,\n            right: this.scrollLeft + this.clientWidth,\n            top: this.scrollTop,\n            bottom: this.scrollTop + this.clientHeight,\n        };\n    };\n    // the window is the only scroll object that changes it's rectangle relative\n    // to the document's topleft as it scrolls\n    WindowScrollGeomCache.prototype.handleScrollChange = function () {\n        this.clientRect = this.computeClientRect();\n    };\n    return WindowScrollGeomCache;\n}(ScrollGeomCache));\n\n// If available we are using native \"performance\" API instead of \"Date\"\n// Read more about it on MDN:\n// https://developer.mozilla.org/en-US/docs/Web/API/Performance\nvar getTime = typeof performance === 'function' ? performance.now : Date.now;\n/*\nFor a pointer interaction, automatically scrolls certain scroll containers when the pointer\napproaches the edge.\n\nThe caller must call start + handleMove + stop.\n*/\nvar AutoScroller = /** @class */ (function () {\n    function AutoScroller() {\n        var _this = this;\n        // options that can be set by caller\n        this.isEnabled = true;\n        this.scrollQuery = [window, '.fc-scroller'];\n        this.edgeThreshold = 50; // pixels\n        this.maxVelocity = 300; // pixels per second\n        // internal state\n        this.pointerScreenX = null;\n        this.pointerScreenY = null;\n        this.isAnimating = false;\n        this.scrollCaches = null;\n        // protect against the initial pointerdown being too close to an edge and starting the scroll\n        this.everMovedUp = false;\n        this.everMovedDown = false;\n        this.everMovedLeft = false;\n        this.everMovedRight = false;\n        this.animate = function () {\n            if (_this.isAnimating) { // wasn't cancelled between animation calls\n                var edge = _this.computeBestEdge(_this.pointerScreenX + window.pageXOffset, _this.pointerScreenY + window.pageYOffset);\n                if (edge) {\n                    var now = getTime();\n                    _this.handleSide(edge, (now - _this.msSinceRequest) / 1000);\n                    _this.requestAnimation(now);\n                }\n                else {\n                    _this.isAnimating = false; // will stop animation\n                }\n            }\n        };\n    }\n    AutoScroller.prototype.start = function (pageX, pageY, scrollStartEl) {\n        if (this.isEnabled) {\n            this.scrollCaches = this.buildCaches(scrollStartEl);\n            this.pointerScreenX = null;\n            this.pointerScreenY = null;\n            this.everMovedUp = false;\n            this.everMovedDown = false;\n            this.everMovedLeft = false;\n            this.everMovedRight = false;\n            this.handleMove(pageX, pageY);\n        }\n    };\n    AutoScroller.prototype.handleMove = function (pageX, pageY) {\n        if (this.isEnabled) {\n            var pointerScreenX = pageX - window.pageXOffset;\n            var pointerScreenY = pageY - window.pageYOffset;\n            var yDelta = this.pointerScreenY === null ? 0 : pointerScreenY - this.pointerScreenY;\n            var xDelta = this.pointerScreenX === null ? 0 : pointerScreenX - this.pointerScreenX;\n            if (yDelta < 0) {\n                this.everMovedUp = true;\n            }\n            else if (yDelta > 0) {\n                this.everMovedDown = true;\n            }\n            if (xDelta < 0) {\n                this.everMovedLeft = true;\n            }\n            else if (xDelta > 0) {\n                this.everMovedRight = true;\n            }\n            this.pointerScreenX = pointerScreenX;\n            this.pointerScreenY = pointerScreenY;\n            if (!this.isAnimating) {\n                this.isAnimating = true;\n                this.requestAnimation(getTime());\n            }\n        }\n    };\n    AutoScroller.prototype.stop = function () {\n        if (this.isEnabled) {\n            this.isAnimating = false; // will stop animation\n            for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n                var scrollCache = _a[_i];\n                scrollCache.destroy();\n            }\n            this.scrollCaches = null;\n        }\n    };\n    AutoScroller.prototype.requestAnimation = function (now) {\n        this.msSinceRequest = now;\n        requestAnimationFrame(this.animate);\n    };\n    AutoScroller.prototype.handleSide = function (edge, seconds) {\n        var scrollCache = edge.scrollCache;\n        var edgeThreshold = this.edgeThreshold;\n        var invDistance = edgeThreshold - edge.distance;\n        var velocity = // the closer to the edge, the faster we scroll\n         ((invDistance * invDistance) / (edgeThreshold * edgeThreshold)) * // quadratic\n            this.maxVelocity * seconds;\n        var sign = 1;\n        switch (edge.name) {\n            case 'left':\n                sign = -1;\n            // falls through\n            case 'right':\n                scrollCache.setScrollLeft(scrollCache.getScrollLeft() + velocity * sign);\n                break;\n            case 'top':\n                sign = -1;\n            // falls through\n            case 'bottom':\n                scrollCache.setScrollTop(scrollCache.getScrollTop() + velocity * sign);\n                break;\n        }\n    };\n    // left/top are relative to document topleft\n    AutoScroller.prototype.computeBestEdge = function (left, top) {\n        var edgeThreshold = this.edgeThreshold;\n        var bestSide = null;\n        for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n            var scrollCache = _a[_i];\n            var rect = scrollCache.clientRect;\n            var leftDist = left - rect.left;\n            var rightDist = rect.right - left;\n            var topDist = top - rect.top;\n            var bottomDist = rect.bottom - top;\n            // completely within the rect?\n            if (leftDist >= 0 && rightDist >= 0 && topDist >= 0 && bottomDist >= 0) {\n                if (topDist <= edgeThreshold && this.everMovedUp && scrollCache.canScrollUp() &&\n                    (!bestSide || bestSide.distance > topDist)) {\n                    bestSide = { scrollCache: scrollCache, name: 'top', distance: topDist };\n                }\n                if (bottomDist <= edgeThreshold && this.everMovedDown && scrollCache.canScrollDown() &&\n                    (!bestSide || bestSide.distance > bottomDist)) {\n                    bestSide = { scrollCache: scrollCache, name: 'bottom', distance: bottomDist };\n                }\n                if (leftDist <= edgeThreshold && this.everMovedLeft && scrollCache.canScrollLeft() &&\n                    (!bestSide || bestSide.distance > leftDist)) {\n                    bestSide = { scrollCache: scrollCache, name: 'left', distance: leftDist };\n                }\n                if (rightDist <= edgeThreshold && this.everMovedRight && scrollCache.canScrollRight() &&\n                    (!bestSide || bestSide.distance > rightDist)) {\n                    bestSide = { scrollCache: scrollCache, name: 'right', distance: rightDist };\n                }\n            }\n        }\n        return bestSide;\n    };\n    AutoScroller.prototype.buildCaches = function (scrollStartEl) {\n        return this.queryScrollEls(scrollStartEl).map(function (el) {\n            if (el === window) {\n                return new WindowScrollGeomCache(false); // false = don't listen to user-generated scrolls\n            }\n            return new ElementScrollGeomCache(el, false); // false = don't listen to user-generated scrolls\n        });\n    };\n    AutoScroller.prototype.queryScrollEls = function (scrollStartEl) {\n        var els = [];\n        for (var _i = 0, _a = this.scrollQuery; _i < _a.length; _i++) {\n            var query = _a[_i];\n            if (typeof query === 'object') {\n                els.push(query);\n            }\n            else {\n                els.push.apply(els, Array.prototype.slice.call(getElRoot(scrollStartEl).querySelectorAll(query)));\n            }\n        }\n        return els;\n    };\n    return AutoScroller;\n}());\n\n/*\nMonitors dragging on an element. Has a number of high-level features:\n- minimum distance required before dragging\n- minimum wait time (\"delay\") before dragging\n- a mirror element that follows the pointer\n*/\nvar FeaturefulElementDragging = /** @class */ (function (_super) {\n    __extends(FeaturefulElementDragging, _super);\n    function FeaturefulElementDragging(containerEl, selector) {\n        var _this = _super.call(this, containerEl) || this;\n        _this.containerEl = containerEl;\n        // options that can be directly set by caller\n        // the caller can also set the PointerDragging's options as well\n        _this.delay = null;\n        _this.minDistance = 0;\n        _this.touchScrollAllowed = true; // prevents drag from starting and blocks scrolling during drag\n        _this.mirrorNeedsRevert = false;\n        _this.isInteracting = false; // is the user validly moving the pointer? lasts until pointerup\n        _this.isDragging = false; // is it INTENTFULLY dragging? lasts until after revert animation\n        _this.isDelayEnded = false;\n        _this.isDistanceSurpassed = false;\n        _this.delayTimeoutId = null;\n        _this.onPointerDown = function (ev) {\n            if (!_this.isDragging) { // so new drag doesn't happen while revert animation is going\n                _this.isInteracting = true;\n                _this.isDelayEnded = false;\n                _this.isDistanceSurpassed = false;\n                preventSelection(document.body);\n                preventContextMenu(document.body);\n                // prevent links from being visited if there's an eventual drag.\n                // also prevents selection in older browsers (maybe?).\n                // not necessary for touch, besides, browser would complain about passiveness.\n                if (!ev.isTouch) {\n                    ev.origEvent.preventDefault();\n                }\n                _this.emitter.trigger('pointerdown', ev);\n                if (_this.isInteracting && // not destroyed via pointerdown handler\n                    !_this.pointer.shouldIgnoreMove) {\n                    // actions related to initiating dragstart+dragmove+dragend...\n                    _this.mirror.setIsVisible(false); // reset. caller must set-visible\n                    _this.mirror.start(ev.subjectEl, ev.pageX, ev.pageY); // must happen on first pointer down\n                    _this.startDelay(ev);\n                    if (!_this.minDistance) {\n                        _this.handleDistanceSurpassed(ev);\n                    }\n                }\n            }\n        };\n        _this.onPointerMove = function (ev) {\n            if (_this.isInteracting) {\n                _this.emitter.trigger('pointermove', ev);\n                if (!_this.isDistanceSurpassed) {\n                    var minDistance = _this.minDistance;\n                    var distanceSq = void 0; // current distance from the origin, squared\n                    var deltaX = ev.deltaX, deltaY = ev.deltaY;\n                    distanceSq = deltaX * deltaX + deltaY * deltaY;\n                    if (distanceSq >= minDistance * minDistance) { // use pythagorean theorem\n                        _this.handleDistanceSurpassed(ev);\n                    }\n                }\n                if (_this.isDragging) {\n                    // a real pointer move? (not one simulated by scrolling)\n                    if (ev.origEvent.type !== 'scroll') {\n                        _this.mirror.handleMove(ev.pageX, ev.pageY);\n                        _this.autoScroller.handleMove(ev.pageX, ev.pageY);\n                    }\n                    _this.emitter.trigger('dragmove', ev);\n                }\n            }\n        };\n        _this.onPointerUp = function (ev) {\n            if (_this.isInteracting) {\n                _this.isInteracting = false;\n                allowSelection(document.body);\n                allowContextMenu(document.body);\n                _this.emitter.trigger('pointerup', ev); // can potentially set mirrorNeedsRevert\n                if (_this.isDragging) {\n                    _this.autoScroller.stop();\n                    _this.tryStopDrag(ev); // which will stop the mirror\n                }\n                if (_this.delayTimeoutId) {\n                    clearTimeout(_this.delayTimeoutId);\n                    _this.delayTimeoutId = null;\n                }\n            }\n        };\n        var pointer = _this.pointer = new PointerDragging(containerEl);\n        pointer.emitter.on('pointerdown', _this.onPointerDown);\n        pointer.emitter.on('pointermove', _this.onPointerMove);\n        pointer.emitter.on('pointerup', _this.onPointerUp);\n        if (selector) {\n            pointer.selector = selector;\n        }\n        _this.mirror = new ElementMirror();\n        _this.autoScroller = new AutoScroller();\n        return _this;\n    }\n    FeaturefulElementDragging.prototype.destroy = function () {\n        this.pointer.destroy();\n        // HACK: simulate a pointer-up to end the current drag\n        // TODO: fire 'dragend' directly and stop interaction. discourage use of pointerup event (b/c might not fire)\n        this.onPointerUp({});\n    };\n    FeaturefulElementDragging.prototype.startDelay = function (ev) {\n        var _this = this;\n        if (typeof this.delay === 'number') {\n            this.delayTimeoutId = setTimeout(function () {\n                _this.delayTimeoutId = null;\n                _this.handleDelayEnd(ev);\n            }, this.delay); // not assignable to number!\n        }\n        else {\n            this.handleDelayEnd(ev);\n        }\n    };\n    FeaturefulElementDragging.prototype.handleDelayEnd = function (ev) {\n        this.isDelayEnded = true;\n        this.tryStartDrag(ev);\n    };\n    FeaturefulElementDragging.prototype.handleDistanceSurpassed = function (ev) {\n        this.isDistanceSurpassed = true;\n        this.tryStartDrag(ev);\n    };\n    FeaturefulElementDragging.prototype.tryStartDrag = function (ev) {\n        if (this.isDelayEnded && this.isDistanceSurpassed) {\n            if (!this.pointer.wasTouchScroll || this.touchScrollAllowed) {\n                this.isDragging = true;\n                this.mirrorNeedsRevert = false;\n                this.autoScroller.start(ev.pageX, ev.pageY, this.containerEl);\n                this.emitter.trigger('dragstart', ev);\n                if (this.touchScrollAllowed === false) {\n                    this.pointer.cancelTouchScroll();\n                }\n            }\n        }\n    };\n    FeaturefulElementDragging.prototype.tryStopDrag = function (ev) {\n        // .stop() is ALWAYS asynchronous, which we NEED because we want all pointerup events\n        // that come from the document to fire beforehand. much more convenient this way.\n        this.mirror.stop(this.mirrorNeedsRevert, this.stopDrag.bind(this, ev));\n    };\n    FeaturefulElementDragging.prototype.stopDrag = function (ev) {\n        this.isDragging = false;\n        this.emitter.trigger('dragend', ev);\n    };\n    // fill in the implementations...\n    FeaturefulElementDragging.prototype.setIgnoreMove = function (bool) {\n        this.pointer.shouldIgnoreMove = bool;\n    };\n    FeaturefulElementDragging.prototype.setMirrorIsVisible = function (bool) {\n        this.mirror.setIsVisible(bool);\n    };\n    FeaturefulElementDragging.prototype.setMirrorNeedsRevert = function (bool) {\n        this.mirrorNeedsRevert = bool;\n    };\n    FeaturefulElementDragging.prototype.setAutoScrollEnabled = function (bool) {\n        this.autoScroller.isEnabled = bool;\n    };\n    return FeaturefulElementDragging;\n}(ElementDragging));\n\n/*\nWhen this class is instantiated, it records the offset of an element (relative to the document topleft),\nand continues to monitor scrolling, updating the cached coordinates if it needs to.\nDoes not access the DOM after instantiation, so highly performant.\n\nAlso keeps track of all scrolling/overflow:hidden containers that are parents of the given element\nand an determine if a given point is inside the combined clipping rectangle.\n*/\nvar OffsetTracker = /** @class */ (function () {\n    function OffsetTracker(el) {\n        this.origRect = computeRect(el);\n        // will work fine for divs that have overflow:hidden\n        this.scrollCaches = getClippingParents(el).map(function (scrollEl) { return new ElementScrollGeomCache(scrollEl, true); });\n    }\n    OffsetTracker.prototype.destroy = function () {\n        for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n            var scrollCache = _a[_i];\n            scrollCache.destroy();\n        }\n    };\n    OffsetTracker.prototype.computeLeft = function () {\n        var left = this.origRect.left;\n        for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n            var scrollCache = _a[_i];\n            left += scrollCache.origScrollLeft - scrollCache.getScrollLeft();\n        }\n        return left;\n    };\n    OffsetTracker.prototype.computeTop = function () {\n        var top = this.origRect.top;\n        for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n            var scrollCache = _a[_i];\n            top += scrollCache.origScrollTop - scrollCache.getScrollTop();\n        }\n        return top;\n    };\n    OffsetTracker.prototype.isWithinClipping = function (pageX, pageY) {\n        var point = { left: pageX, top: pageY };\n        for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n            var scrollCache = _a[_i];\n            if (!isIgnoredClipping(scrollCache.getEventTarget()) &&\n                !pointInsideRect(point, scrollCache.clientRect)) {\n                return false;\n            }\n        }\n        return true;\n    };\n    return OffsetTracker;\n}());\n// certain clipping containers should never constrain interactions, like <html> and <body>\n// https://github.com/fullcalendar/fullcalendar/issues/3615\nfunction isIgnoredClipping(node) {\n    var tagName = node.tagName;\n    return tagName === 'HTML' || tagName === 'BODY';\n}\n\n/*\nTracks movement over multiple droppable areas (aka \"hits\")\nthat exist in one or more DateComponents.\nRelies on an existing draggable.\n\nemits:\n- pointerdown\n- dragstart\n- hitchange - fires initially, even if not over a hit\n- pointerup\n- (hitchange - again, to null, if ended over a hit)\n- dragend\n*/\nvar HitDragging = /** @class */ (function () {\n    function HitDragging(dragging, droppableStore) {\n        var _this = this;\n        // options that can be set by caller\n        this.useSubjectCenter = false;\n        this.requireInitial = true; // if doesn't start out on a hit, won't emit any events\n        this.initialHit = null;\n        this.movingHit = null;\n        this.finalHit = null; // won't ever be populated if shouldIgnoreMove\n        this.handlePointerDown = function (ev) {\n            var dragging = _this.dragging;\n            _this.initialHit = null;\n            _this.movingHit = null;\n            _this.finalHit = null;\n            _this.prepareHits();\n            _this.processFirstCoord(ev);\n            if (_this.initialHit || !_this.requireInitial) {\n                dragging.setIgnoreMove(false);\n                // TODO: fire this before computing processFirstCoord, so listeners can cancel. this gets fired by almost every handler :(\n                _this.emitter.trigger('pointerdown', ev);\n            }\n            else {\n                dragging.setIgnoreMove(true);\n            }\n        };\n        this.handleDragStart = function (ev) {\n            _this.emitter.trigger('dragstart', ev);\n            _this.handleMove(ev, true); // force = fire even if initially null\n        };\n        this.handleDragMove = function (ev) {\n            _this.emitter.trigger('dragmove', ev);\n            _this.handleMove(ev);\n        };\n        this.handlePointerUp = function (ev) {\n            _this.releaseHits();\n            _this.emitter.trigger('pointerup', ev);\n        };\n        this.handleDragEnd = function (ev) {\n            if (_this.movingHit) {\n                _this.emitter.trigger('hitupdate', null, true, ev);\n            }\n            _this.finalHit = _this.movingHit;\n            _this.movingHit = null;\n            _this.emitter.trigger('dragend', ev);\n        };\n        this.droppableStore = droppableStore;\n        dragging.emitter.on('pointerdown', this.handlePointerDown);\n        dragging.emitter.on('dragstart', this.handleDragStart);\n        dragging.emitter.on('dragmove', this.handleDragMove);\n        dragging.emitter.on('pointerup', this.handlePointerUp);\n        dragging.emitter.on('dragend', this.handleDragEnd);\n        this.dragging = dragging;\n        this.emitter = new Emitter();\n    }\n    // sets initialHit\n    // sets coordAdjust\n    HitDragging.prototype.processFirstCoord = function (ev) {\n        var origPoint = { left: ev.pageX, top: ev.pageY };\n        var adjustedPoint = origPoint;\n        var subjectEl = ev.subjectEl;\n        var subjectRect;\n        if (subjectEl instanceof HTMLElement) { // i.e. not a Document/ShadowRoot\n            subjectRect = computeRect(subjectEl);\n            adjustedPoint = constrainPoint(adjustedPoint, subjectRect);\n        }\n        var initialHit = this.initialHit = this.queryHitForOffset(adjustedPoint.left, adjustedPoint.top);\n        if (initialHit) {\n            if (this.useSubjectCenter && subjectRect) {\n                var slicedSubjectRect = intersectRects(subjectRect, initialHit.rect);\n                if (slicedSubjectRect) {\n                    adjustedPoint = getRectCenter(slicedSubjectRect);\n                }\n            }\n            this.coordAdjust = diffPoints(adjustedPoint, origPoint);\n        }\n        else {\n            this.coordAdjust = { left: 0, top: 0 };\n        }\n    };\n    HitDragging.prototype.handleMove = function (ev, forceHandle) {\n        var hit = this.queryHitForOffset(ev.pageX + this.coordAdjust.left, ev.pageY + this.coordAdjust.top);\n        if (forceHandle || !isHitsEqual(this.movingHit, hit)) {\n            this.movingHit = hit;\n            this.emitter.trigger('hitupdate', hit, false, ev);\n        }\n    };\n    HitDragging.prototype.prepareHits = function () {\n        this.offsetTrackers = mapHash(this.droppableStore, function (interactionSettings) {\n            interactionSettings.component.prepareHits();\n            return new OffsetTracker(interactionSettings.el);\n        });\n    };\n    HitDragging.prototype.releaseHits = function () {\n        var offsetTrackers = this.offsetTrackers;\n        for (var id in offsetTrackers) {\n            offsetTrackers[id].destroy();\n        }\n        this.offsetTrackers = {};\n    };\n    HitDragging.prototype.queryHitForOffset = function (offsetLeft, offsetTop) {\n        var _a = this, droppableStore = _a.droppableStore, offsetTrackers = _a.offsetTrackers;\n        var bestHit = null;\n        for (var id in droppableStore) {\n            var component = droppableStore[id].component;\n            var offsetTracker = offsetTrackers[id];\n            if (offsetTracker && // wasn't destroyed mid-drag\n                offsetTracker.isWithinClipping(offsetLeft, offsetTop)) {\n                var originLeft = offsetTracker.computeLeft();\n                var originTop = offsetTracker.computeTop();\n                var positionLeft = offsetLeft - originLeft;\n                var positionTop = offsetTop - originTop;\n                var origRect = offsetTracker.origRect;\n                var width = origRect.right - origRect.left;\n                var height = origRect.bottom - origRect.top;\n                if (\n                // must be within the element's bounds\n                positionLeft >= 0 && positionLeft < width &&\n                    positionTop >= 0 && positionTop < height) {\n                    var hit = component.queryHit(positionLeft, positionTop, width, height);\n                    if (hit && (\n                    // make sure the hit is within activeRange, meaning it's not a dead cell\n                    rangeContainsRange(hit.dateProfile.activeRange, hit.dateSpan.range)) &&\n                        (!bestHit || hit.layer > bestHit.layer)) {\n                        hit.componentId = id;\n                        hit.context = component.context;\n                        // TODO: better way to re-orient rectangle\n                        hit.rect.left += originLeft;\n                        hit.rect.right += originLeft;\n                        hit.rect.top += originTop;\n                        hit.rect.bottom += originTop;\n                        bestHit = hit;\n                    }\n                }\n            }\n        }\n        return bestHit;\n    };\n    return HitDragging;\n}());\nfunction isHitsEqual(hit0, hit1) {\n    if (!hit0 && !hit1) {\n        return true;\n    }\n    if (Boolean(hit0) !== Boolean(hit1)) {\n        return false;\n    }\n    return isDateSpansEqual(hit0.dateSpan, hit1.dateSpan);\n}\n\nfunction buildDatePointApiWithContext(dateSpan, context) {\n    var props = {};\n    for (var _i = 0, _a = context.pluginHooks.datePointTransforms; _i < _a.length; _i++) {\n        var transform = _a[_i];\n        __assign(props, transform(dateSpan, context));\n    }\n    __assign(props, buildDatePointApi(dateSpan, context.dateEnv));\n    return props;\n}\nfunction buildDatePointApi(span, dateEnv) {\n    return {\n        date: dateEnv.toDate(span.range.start),\n        dateStr: dateEnv.formatIso(span.range.start, { omitTime: span.allDay }),\n        allDay: span.allDay,\n    };\n}\n\n/*\nMonitors when the user clicks on a specific date/time of a component.\nA pointerdown+pointerup on the same \"hit\" constitutes a click.\n*/\nvar DateClicking = /** @class */ (function (_super) {\n    __extends(DateClicking, _super);\n    function DateClicking(settings) {\n        var _this = _super.call(this, settings) || this;\n        _this.handlePointerDown = function (pev) {\n            var dragging = _this.dragging;\n            var downEl = pev.origEvent.target;\n            // do this in pointerdown (not dragend) because DOM might be mutated by the time dragend is fired\n            dragging.setIgnoreMove(!_this.component.isValidDateDownEl(downEl));\n        };\n        // won't even fire if moving was ignored\n        _this.handleDragEnd = function (ev) {\n            var component = _this.component;\n            var pointer = _this.dragging.pointer;\n            if (!pointer.wasTouchScroll) {\n                var _a = _this.hitDragging, initialHit = _a.initialHit, finalHit = _a.finalHit;\n                if (initialHit && finalHit && isHitsEqual(initialHit, finalHit)) {\n                    var context = component.context;\n                    var arg = __assign(__assign({}, buildDatePointApiWithContext(initialHit.dateSpan, context)), { dayEl: initialHit.dayEl, jsEvent: ev.origEvent, view: context.viewApi || context.calendarApi.view });\n                    context.emitter.trigger('dateClick', arg);\n                }\n            }\n        };\n        // we DO want to watch pointer moves because otherwise finalHit won't get populated\n        _this.dragging = new FeaturefulElementDragging(settings.el);\n        _this.dragging.autoScroller.isEnabled = false;\n        var hitDragging = _this.hitDragging = new HitDragging(_this.dragging, interactionSettingsToStore(settings));\n        hitDragging.emitter.on('pointerdown', _this.handlePointerDown);\n        hitDragging.emitter.on('dragend', _this.handleDragEnd);\n        return _this;\n    }\n    DateClicking.prototype.destroy = function () {\n        this.dragging.destroy();\n    };\n    return DateClicking;\n}(Interaction));\n\n/*\nTracks when the user selects a portion of time of a component,\nconstituted by a drag over date cells, with a possible delay at the beginning of the drag.\n*/\nvar DateSelecting = /** @class */ (function (_super) {\n    __extends(DateSelecting, _super);\n    function DateSelecting(settings) {\n        var _this = _super.call(this, settings) || this;\n        _this.dragSelection = null;\n        _this.handlePointerDown = function (ev) {\n            var _a = _this, component = _a.component, dragging = _a.dragging;\n            var options = component.context.options;\n            var canSelect = options.selectable &&\n                component.isValidDateDownEl(ev.origEvent.target);\n            // don't bother to watch expensive moves if component won't do selection\n            dragging.setIgnoreMove(!canSelect);\n            // if touch, require user to hold down\n            dragging.delay = ev.isTouch ? getComponentTouchDelay$1(component) : null;\n        };\n        _this.handleDragStart = function (ev) {\n            _this.component.context.calendarApi.unselect(ev); // unselect previous selections\n        };\n        _this.handleHitUpdate = function (hit, isFinal) {\n            var context = _this.component.context;\n            var dragSelection = null;\n            var isInvalid = false;\n            if (hit) {\n                var initialHit = _this.hitDragging.initialHit;\n                var disallowed = hit.componentId === initialHit.componentId\n                    && _this.isHitComboAllowed\n                    && !_this.isHitComboAllowed(initialHit, hit);\n                if (!disallowed) {\n                    dragSelection = joinHitsIntoSelection(initialHit, hit, context.pluginHooks.dateSelectionTransformers);\n                }\n                if (!dragSelection || !isDateSelectionValid(dragSelection, hit.dateProfile, context)) {\n                    isInvalid = true;\n                    dragSelection = null;\n                }\n            }\n            if (dragSelection) {\n                context.dispatch({ type: 'SELECT_DATES', selection: dragSelection });\n            }\n            else if (!isFinal) { // only unselect if moved away while dragging\n                context.dispatch({ type: 'UNSELECT_DATES' });\n            }\n            if (!isInvalid) {\n                enableCursor();\n            }\n            else {\n                disableCursor();\n            }\n            if (!isFinal) {\n                _this.dragSelection = dragSelection; // only clear if moved away from all hits while dragging\n            }\n        };\n        _this.handlePointerUp = function (pev) {\n            if (_this.dragSelection) {\n                // selection is already rendered, so just need to report selection\n                triggerDateSelect(_this.dragSelection, pev, _this.component.context);\n                _this.dragSelection = null;\n            }\n        };\n        var component = settings.component;\n        var options = component.context.options;\n        var dragging = _this.dragging = new FeaturefulElementDragging(settings.el);\n        dragging.touchScrollAllowed = false;\n        dragging.minDistance = options.selectMinDistance || 0;\n        dragging.autoScroller.isEnabled = options.dragScroll;\n        var hitDragging = _this.hitDragging = new HitDragging(_this.dragging, interactionSettingsToStore(settings));\n        hitDragging.emitter.on('pointerdown', _this.handlePointerDown);\n        hitDragging.emitter.on('dragstart', _this.handleDragStart);\n        hitDragging.emitter.on('hitupdate', _this.handleHitUpdate);\n        hitDragging.emitter.on('pointerup', _this.handlePointerUp);\n        return _this;\n    }\n    DateSelecting.prototype.destroy = function () {\n        this.dragging.destroy();\n    };\n    return DateSelecting;\n}(Interaction));\nfunction getComponentTouchDelay$1(component) {\n    var options = component.context.options;\n    var delay = options.selectLongPressDelay;\n    if (delay == null) {\n        delay = options.longPressDelay;\n    }\n    return delay;\n}\nfunction joinHitsIntoSelection(hit0, hit1, dateSelectionTransformers) {\n    var dateSpan0 = hit0.dateSpan;\n    var dateSpan1 = hit1.dateSpan;\n    var ms = [\n        dateSpan0.range.start,\n        dateSpan0.range.end,\n        dateSpan1.range.start,\n        dateSpan1.range.end,\n    ];\n    ms.sort(compareNumbers);\n    var props = {};\n    for (var _i = 0, dateSelectionTransformers_1 = dateSelectionTransformers; _i < dateSelectionTransformers_1.length; _i++) {\n        var transformer = dateSelectionTransformers_1[_i];\n        var res = transformer(hit0, hit1);\n        if (res === false) {\n            return null;\n        }\n        if (res) {\n            __assign(props, res);\n        }\n    }\n    props.range = { start: ms[0], end: ms[3] };\n    props.allDay = dateSpan0.allDay;\n    return props;\n}\n\nvar EventDragging = /** @class */ (function (_super) {\n    __extends(EventDragging, _super);\n    function EventDragging(settings) {\n        var _this = _super.call(this, settings) || this;\n        // internal state\n        _this.subjectEl = null;\n        _this.subjectSeg = null; // the seg being selected/dragged\n        _this.isDragging = false;\n        _this.eventRange = null;\n        _this.relevantEvents = null; // the events being dragged\n        _this.receivingContext = null;\n        _this.validMutation = null;\n        _this.mutatedRelevantEvents = null;\n        _this.handlePointerDown = function (ev) {\n            var origTarget = ev.origEvent.target;\n            var _a = _this, component = _a.component, dragging = _a.dragging;\n            var mirror = dragging.mirror;\n            var options = component.context.options;\n            var initialContext = component.context;\n            _this.subjectEl = ev.subjectEl;\n            var subjectSeg = _this.subjectSeg = getElSeg(ev.subjectEl);\n            var eventRange = _this.eventRange = subjectSeg.eventRange;\n            var eventInstanceId = eventRange.instance.instanceId;\n            _this.relevantEvents = getRelevantEvents(initialContext.getCurrentData().eventStore, eventInstanceId);\n            dragging.minDistance = ev.isTouch ? 0 : options.eventDragMinDistance;\n            dragging.delay =\n                // only do a touch delay if touch and this event hasn't been selected yet\n                (ev.isTouch && eventInstanceId !== component.props.eventSelection) ?\n                    getComponentTouchDelay(component) :\n                    null;\n            if (options.fixedMirrorParent) {\n                mirror.parentNode = options.fixedMirrorParent;\n            }\n            else {\n                mirror.parentNode = elementClosest(origTarget, '.fc');\n            }\n            mirror.revertDuration = options.dragRevertDuration;\n            var isValid = component.isValidSegDownEl(origTarget) &&\n                !elementClosest(origTarget, '.fc-event-resizer'); // NOT on a resizer\n            dragging.setIgnoreMove(!isValid);\n            // disable dragging for elements that are resizable (ie, selectable)\n            // but are not draggable\n            _this.isDragging = isValid &&\n                ev.subjectEl.classList.contains('fc-event-draggable');\n        };\n        _this.handleDragStart = function (ev) {\n            var initialContext = _this.component.context;\n            var eventRange = _this.eventRange;\n            var eventInstanceId = eventRange.instance.instanceId;\n            if (ev.isTouch) {\n                // need to select a different event?\n                if (eventInstanceId !== _this.component.props.eventSelection) {\n                    initialContext.dispatch({ type: 'SELECT_EVENT', eventInstanceId: eventInstanceId });\n                }\n            }\n            else {\n                // if now using mouse, but was previous touch interaction, clear selected event\n                initialContext.dispatch({ type: 'UNSELECT_EVENT' });\n            }\n            if (_this.isDragging) {\n                initialContext.calendarApi.unselect(ev); // unselect *date* selection\n                initialContext.emitter.trigger('eventDragStart', {\n                    el: _this.subjectEl,\n                    event: new EventApi(initialContext, eventRange.def, eventRange.instance),\n                    jsEvent: ev.origEvent,\n                    view: initialContext.viewApi,\n                });\n            }\n        };\n        _this.handleHitUpdate = function (hit, isFinal) {\n            if (!_this.isDragging) {\n                return;\n            }\n            var relevantEvents = _this.relevantEvents;\n            var initialHit = _this.hitDragging.initialHit;\n            var initialContext = _this.component.context;\n            // states based on new hit\n            var receivingContext = null;\n            var mutation = null;\n            var mutatedRelevantEvents = null;\n            var isInvalid = false;\n            var interaction = {\n                affectedEvents: relevantEvents,\n                mutatedEvents: createEmptyEventStore(),\n                isEvent: true,\n            };\n            if (hit) {\n                receivingContext = hit.context;\n                var receivingOptions = receivingContext.options;\n                if (initialContext === receivingContext ||\n                    (receivingOptions.editable && receivingOptions.droppable)) {\n                    mutation = computeEventMutation(initialHit, hit, receivingContext.getCurrentData().pluginHooks.eventDragMutationMassagers);\n                    if (mutation) {\n                        mutatedRelevantEvents = applyMutationToEventStore(relevantEvents, receivingContext.getCurrentData().eventUiBases, mutation, receivingContext);\n                        interaction.mutatedEvents = mutatedRelevantEvents;\n                        if (!isInteractionValid(interaction, hit.dateProfile, receivingContext)) {\n                            isInvalid = true;\n                            mutation = null;\n                            mutatedRelevantEvents = null;\n                            interaction.mutatedEvents = createEmptyEventStore();\n                        }\n                    }\n                }\n                else {\n                    receivingContext = null;\n                }\n            }\n            _this.displayDrag(receivingContext, interaction);\n            if (!isInvalid) {\n                enableCursor();\n            }\n            else {\n                disableCursor();\n            }\n            if (!isFinal) {\n                if (initialContext === receivingContext && // TODO: write test for this\n                    isHitsEqual(initialHit, hit)) {\n                    mutation = null;\n                }\n                _this.dragging.setMirrorNeedsRevert(!mutation);\n                // render the mirror if no already-rendered mirror\n                // TODO: wish we could somehow wait for dispatch to guarantee render\n                _this.dragging.setMirrorIsVisible(!hit || !getElRoot(_this.subjectEl).querySelector('.fc-event-mirror'));\n                // assign states based on new hit\n                _this.receivingContext = receivingContext;\n                _this.validMutation = mutation;\n                _this.mutatedRelevantEvents = mutatedRelevantEvents;\n            }\n        };\n        _this.handlePointerUp = function () {\n            if (!_this.isDragging) {\n                _this.cleanup(); // because handleDragEnd won't fire\n            }\n        };\n        _this.handleDragEnd = function (ev) {\n            if (_this.isDragging) {\n                var initialContext_1 = _this.component.context;\n                var initialView = initialContext_1.viewApi;\n                var _a = _this, receivingContext_1 = _a.receivingContext, validMutation = _a.validMutation;\n                var eventDef = _this.eventRange.def;\n                var eventInstance = _this.eventRange.instance;\n                var eventApi = new EventApi(initialContext_1, eventDef, eventInstance);\n                var relevantEvents_1 = _this.relevantEvents;\n                var mutatedRelevantEvents_1 = _this.mutatedRelevantEvents;\n                var finalHit = _this.hitDragging.finalHit;\n                _this.clearDrag(); // must happen after revert animation\n                initialContext_1.emitter.trigger('eventDragStop', {\n                    el: _this.subjectEl,\n                    event: eventApi,\n                    jsEvent: ev.origEvent,\n                    view: initialView,\n                });\n                if (validMutation) {\n                    // dropped within same calendar\n                    if (receivingContext_1 === initialContext_1) {\n                        var updatedEventApi = new EventApi(initialContext_1, mutatedRelevantEvents_1.defs[eventDef.defId], eventInstance ? mutatedRelevantEvents_1.instances[eventInstance.instanceId] : null);\n                        initialContext_1.dispatch({\n                            type: 'MERGE_EVENTS',\n                            eventStore: mutatedRelevantEvents_1,\n                        });\n                        var eventChangeArg = {\n                            oldEvent: eventApi,\n                            event: updatedEventApi,\n                            relatedEvents: buildEventApis(mutatedRelevantEvents_1, initialContext_1, eventInstance),\n                            revert: function () {\n                                initialContext_1.dispatch({\n                                    type: 'MERGE_EVENTS',\n                                    eventStore: relevantEvents_1, // the pre-change data\n                                });\n                            },\n                        };\n                        var transformed = {};\n                        for (var _i = 0, _b = initialContext_1.getCurrentData().pluginHooks.eventDropTransformers; _i < _b.length; _i++) {\n                            var transformer = _b[_i];\n                            __assign(transformed, transformer(validMutation, initialContext_1));\n                        }\n                        initialContext_1.emitter.trigger('eventDrop', __assign(__assign(__assign({}, eventChangeArg), transformed), { el: ev.subjectEl, delta: validMutation.datesDelta, jsEvent: ev.origEvent, view: initialView }));\n                        initialContext_1.emitter.trigger('eventChange', eventChangeArg);\n                        // dropped in different calendar\n                    }\n                    else if (receivingContext_1) {\n                        var eventRemoveArg = {\n                            event: eventApi,\n                            relatedEvents: buildEventApis(relevantEvents_1, initialContext_1, eventInstance),\n                            revert: function () {\n                                initialContext_1.dispatch({\n                                    type: 'MERGE_EVENTS',\n                                    eventStore: relevantEvents_1,\n                                });\n                            },\n                        };\n                        initialContext_1.emitter.trigger('eventLeave', __assign(__assign({}, eventRemoveArg), { draggedEl: ev.subjectEl, view: initialView }));\n                        initialContext_1.dispatch({\n                            type: 'REMOVE_EVENTS',\n                            eventStore: relevantEvents_1,\n                        });\n                        initialContext_1.emitter.trigger('eventRemove', eventRemoveArg);\n                        var addedEventDef = mutatedRelevantEvents_1.defs[eventDef.defId];\n                        var addedEventInstance = mutatedRelevantEvents_1.instances[eventInstance.instanceId];\n                        var addedEventApi = new EventApi(receivingContext_1, addedEventDef, addedEventInstance);\n                        receivingContext_1.dispatch({\n                            type: 'MERGE_EVENTS',\n                            eventStore: mutatedRelevantEvents_1,\n                        });\n                        var eventAddArg = {\n                            event: addedEventApi,\n                            relatedEvents: buildEventApis(mutatedRelevantEvents_1, receivingContext_1, addedEventInstance),\n                            revert: function () {\n                                receivingContext_1.dispatch({\n                                    type: 'REMOVE_EVENTS',\n                                    eventStore: mutatedRelevantEvents_1,\n                                });\n                            },\n                        };\n                        receivingContext_1.emitter.trigger('eventAdd', eventAddArg);\n                        if (ev.isTouch) {\n                            receivingContext_1.dispatch({\n                                type: 'SELECT_EVENT',\n                                eventInstanceId: eventInstance.instanceId,\n                            });\n                        }\n                        receivingContext_1.emitter.trigger('drop', __assign(__assign({}, buildDatePointApiWithContext(finalHit.dateSpan, receivingContext_1)), { draggedEl: ev.subjectEl, jsEvent: ev.origEvent, view: finalHit.context.viewApi }));\n                        receivingContext_1.emitter.trigger('eventReceive', __assign(__assign({}, eventAddArg), { draggedEl: ev.subjectEl, view: finalHit.context.viewApi }));\n                    }\n                }\n                else {\n                    initialContext_1.emitter.trigger('_noEventDrop');\n                }\n            }\n            _this.cleanup();\n        };\n        var component = _this.component;\n        var options = component.context.options;\n        var dragging = _this.dragging = new FeaturefulElementDragging(settings.el);\n        dragging.pointer.selector = EventDragging.SELECTOR;\n        dragging.touchScrollAllowed = false;\n        dragging.autoScroller.isEnabled = options.dragScroll;\n        var hitDragging = _this.hitDragging = new HitDragging(_this.dragging, interactionSettingsStore);\n        hitDragging.useSubjectCenter = settings.useEventCenter;\n        hitDragging.emitter.on('pointerdown', _this.handlePointerDown);\n        hitDragging.emitter.on('dragstart', _this.handleDragStart);\n        hitDragging.emitter.on('hitupdate', _this.handleHitUpdate);\n        hitDragging.emitter.on('pointerup', _this.handlePointerUp);\n        hitDragging.emitter.on('dragend', _this.handleDragEnd);\n        return _this;\n    }\n    EventDragging.prototype.destroy = function () {\n        this.dragging.destroy();\n    };\n    // render a drag state on the next receivingCalendar\n    EventDragging.prototype.displayDrag = function (nextContext, state) {\n        var initialContext = this.component.context;\n        var prevContext = this.receivingContext;\n        // does the previous calendar need to be cleared?\n        if (prevContext && prevContext !== nextContext) {\n            // does the initial calendar need to be cleared?\n            // if so, don't clear all the way. we still need to to hide the affectedEvents\n            if (prevContext === initialContext) {\n                prevContext.dispatch({\n                    type: 'SET_EVENT_DRAG',\n                    state: {\n                        affectedEvents: state.affectedEvents,\n                        mutatedEvents: createEmptyEventStore(),\n                        isEvent: true,\n                    },\n                });\n                // completely clear the old calendar if it wasn't the initial\n            }\n            else {\n                prevContext.dispatch({ type: 'UNSET_EVENT_DRAG' });\n            }\n        }\n        if (nextContext) {\n            nextContext.dispatch({ type: 'SET_EVENT_DRAG', state: state });\n        }\n    };\n    EventDragging.prototype.clearDrag = function () {\n        var initialCalendar = this.component.context;\n        var receivingContext = this.receivingContext;\n        if (receivingContext) {\n            receivingContext.dispatch({ type: 'UNSET_EVENT_DRAG' });\n        }\n        // the initial calendar might have an dummy drag state from displayDrag\n        if (initialCalendar !== receivingContext) {\n            initialCalendar.dispatch({ type: 'UNSET_EVENT_DRAG' });\n        }\n    };\n    EventDragging.prototype.cleanup = function () {\n        this.subjectSeg = null;\n        this.isDragging = false;\n        this.eventRange = null;\n        this.relevantEvents = null;\n        this.receivingContext = null;\n        this.validMutation = null;\n        this.mutatedRelevantEvents = null;\n    };\n    // TODO: test this in IE11\n    // QUESTION: why do we need it on the resizable???\n    EventDragging.SELECTOR = '.fc-event-draggable, .fc-event-resizable';\n    return EventDragging;\n}(Interaction));\nfunction computeEventMutation(hit0, hit1, massagers) {\n    var dateSpan0 = hit0.dateSpan;\n    var dateSpan1 = hit1.dateSpan;\n    var date0 = dateSpan0.range.start;\n    var date1 = dateSpan1.range.start;\n    var standardProps = {};\n    if (dateSpan0.allDay !== dateSpan1.allDay) {\n        standardProps.allDay = dateSpan1.allDay;\n        standardProps.hasEnd = hit1.context.options.allDayMaintainDuration;\n        if (dateSpan1.allDay) {\n            // means date1 is already start-of-day,\n            // but date0 needs to be converted\n            date0 = startOfDay(date0);\n        }\n    }\n    var delta = diffDates(date0, date1, hit0.context.dateEnv, hit0.componentId === hit1.componentId ?\n        hit0.largeUnit :\n        null);\n    if (delta.milliseconds) { // has hours/minutes/seconds\n        standardProps.allDay = false;\n    }\n    var mutation = {\n        datesDelta: delta,\n        standardProps: standardProps,\n    };\n    for (var _i = 0, massagers_1 = massagers; _i < massagers_1.length; _i++) {\n        var massager = massagers_1[_i];\n        massager(mutation, hit0, hit1);\n    }\n    return mutation;\n}\nfunction getComponentTouchDelay(component) {\n    var options = component.context.options;\n    var delay = options.eventLongPressDelay;\n    if (delay == null) {\n        delay = options.longPressDelay;\n    }\n    return delay;\n}\n\nvar EventResizing = /** @class */ (function (_super) {\n    __extends(EventResizing, _super);\n    function EventResizing(settings) {\n        var _this = _super.call(this, settings) || this;\n        // internal state\n        _this.draggingSegEl = null;\n        _this.draggingSeg = null; // TODO: rename to resizingSeg? subjectSeg?\n        _this.eventRange = null;\n        _this.relevantEvents = null;\n        _this.validMutation = null;\n        _this.mutatedRelevantEvents = null;\n        _this.handlePointerDown = function (ev) {\n            var component = _this.component;\n            var segEl = _this.querySegEl(ev);\n            var seg = getElSeg(segEl);\n            var eventRange = _this.eventRange = seg.eventRange;\n            _this.dragging.minDistance = component.context.options.eventDragMinDistance;\n            // if touch, need to be working with a selected event\n            _this.dragging.setIgnoreMove(!_this.component.isValidSegDownEl(ev.origEvent.target) ||\n                (ev.isTouch && _this.component.props.eventSelection !== eventRange.instance.instanceId));\n        };\n        _this.handleDragStart = function (ev) {\n            var context = _this.component.context;\n            var eventRange = _this.eventRange;\n            _this.relevantEvents = getRelevantEvents(context.getCurrentData().eventStore, _this.eventRange.instance.instanceId);\n            var segEl = _this.querySegEl(ev);\n            _this.draggingSegEl = segEl;\n            _this.draggingSeg = getElSeg(segEl);\n            context.calendarApi.unselect();\n            context.emitter.trigger('eventResizeStart', {\n                el: segEl,\n                event: new EventApi(context, eventRange.def, eventRange.instance),\n                jsEvent: ev.origEvent,\n                view: context.viewApi,\n            });\n        };\n        _this.handleHitUpdate = function (hit, isFinal, ev) {\n            var context = _this.component.context;\n            var relevantEvents = _this.relevantEvents;\n            var initialHit = _this.hitDragging.initialHit;\n            var eventInstance = _this.eventRange.instance;\n            var mutation = null;\n            var mutatedRelevantEvents = null;\n            var isInvalid = false;\n            var interaction = {\n                affectedEvents: relevantEvents,\n                mutatedEvents: createEmptyEventStore(),\n                isEvent: true,\n            };\n            if (hit) {\n                var disallowed = hit.componentId === initialHit.componentId\n                    && _this.isHitComboAllowed\n                    && !_this.isHitComboAllowed(initialHit, hit);\n                if (!disallowed) {\n                    mutation = computeMutation(initialHit, hit, ev.subjectEl.classList.contains('fc-event-resizer-start'), eventInstance.range);\n                }\n            }\n            if (mutation) {\n                mutatedRelevantEvents = applyMutationToEventStore(relevantEvents, context.getCurrentData().eventUiBases, mutation, context);\n                interaction.mutatedEvents = mutatedRelevantEvents;\n                if (!isInteractionValid(interaction, hit.dateProfile, context)) {\n                    isInvalid = true;\n                    mutation = null;\n                    mutatedRelevantEvents = null;\n                    interaction.mutatedEvents = null;\n                }\n            }\n            if (mutatedRelevantEvents) {\n                context.dispatch({\n                    type: 'SET_EVENT_RESIZE',\n                    state: interaction,\n                });\n            }\n            else {\n                context.dispatch({ type: 'UNSET_EVENT_RESIZE' });\n            }\n            if (!isInvalid) {\n                enableCursor();\n            }\n            else {\n                disableCursor();\n            }\n            if (!isFinal) {\n                if (mutation && isHitsEqual(initialHit, hit)) {\n                    mutation = null;\n                }\n                _this.validMutation = mutation;\n                _this.mutatedRelevantEvents = mutatedRelevantEvents;\n            }\n        };\n        _this.handleDragEnd = function (ev) {\n            var context = _this.component.context;\n            var eventDef = _this.eventRange.def;\n            var eventInstance = _this.eventRange.instance;\n            var eventApi = new EventApi(context, eventDef, eventInstance);\n            var relevantEvents = _this.relevantEvents;\n            var mutatedRelevantEvents = _this.mutatedRelevantEvents;\n            context.emitter.trigger('eventResizeStop', {\n                el: _this.draggingSegEl,\n                event: eventApi,\n                jsEvent: ev.origEvent,\n                view: context.viewApi,\n            });\n            if (_this.validMutation) {\n                var updatedEventApi = new EventApi(context, mutatedRelevantEvents.defs[eventDef.defId], eventInstance ? mutatedRelevantEvents.instances[eventInstance.instanceId] : null);\n                context.dispatch({\n                    type: 'MERGE_EVENTS',\n                    eventStore: mutatedRelevantEvents,\n                });\n                var eventChangeArg = {\n                    oldEvent: eventApi,\n                    event: updatedEventApi,\n                    relatedEvents: buildEventApis(mutatedRelevantEvents, context, eventInstance),\n                    revert: function () {\n                        context.dispatch({\n                            type: 'MERGE_EVENTS',\n                            eventStore: relevantEvents, // the pre-change events\n                        });\n                    },\n                };\n                context.emitter.trigger('eventResize', __assign(__assign({}, eventChangeArg), { el: _this.draggingSegEl, startDelta: _this.validMutation.startDelta || createDuration(0), endDelta: _this.validMutation.endDelta || createDuration(0), jsEvent: ev.origEvent, view: context.viewApi }));\n                context.emitter.trigger('eventChange', eventChangeArg);\n            }\n            else {\n                context.emitter.trigger('_noEventResize');\n            }\n            // reset all internal state\n            _this.draggingSeg = null;\n            _this.relevantEvents = null;\n            _this.validMutation = null;\n            // okay to keep eventInstance around. useful to set it in handlePointerDown\n        };\n        var component = settings.component;\n        var dragging = _this.dragging = new FeaturefulElementDragging(settings.el);\n        dragging.pointer.selector = '.fc-event-resizer';\n        dragging.touchScrollAllowed = false;\n        dragging.autoScroller.isEnabled = component.context.options.dragScroll;\n        var hitDragging = _this.hitDragging = new HitDragging(_this.dragging, interactionSettingsToStore(settings));\n        hitDragging.emitter.on('pointerdown', _this.handlePointerDown);\n        hitDragging.emitter.on('dragstart', _this.handleDragStart);\n        hitDragging.emitter.on('hitupdate', _this.handleHitUpdate);\n        hitDragging.emitter.on('dragend', _this.handleDragEnd);\n        return _this;\n    }\n    EventResizing.prototype.destroy = function () {\n        this.dragging.destroy();\n    };\n    EventResizing.prototype.querySegEl = function (ev) {\n        return elementClosest(ev.subjectEl, '.fc-event');\n    };\n    return EventResizing;\n}(Interaction));\nfunction computeMutation(hit0, hit1, isFromStart, instanceRange) {\n    var dateEnv = hit0.context.dateEnv;\n    var date0 = hit0.dateSpan.range.start;\n    var date1 = hit1.dateSpan.range.start;\n    var delta = diffDates(date0, date1, dateEnv, hit0.largeUnit);\n    if (isFromStart) {\n        if (dateEnv.add(instanceRange.start, delta) < instanceRange.end) {\n            return { startDelta: delta };\n        }\n    }\n    else if (dateEnv.add(instanceRange.end, delta) > instanceRange.start) {\n        return { endDelta: delta };\n    }\n    return null;\n}\n\nvar UnselectAuto = /** @class */ (function () {\n    function UnselectAuto(context) {\n        var _this = this;\n        this.context = context;\n        this.isRecentPointerDateSelect = false; // wish we could use a selector to detect date selection, but uses hit system\n        this.matchesCancel = false;\n        this.matchesEvent = false;\n        this.onSelect = function (selectInfo) {\n            if (selectInfo.jsEvent) {\n                _this.isRecentPointerDateSelect = true;\n            }\n        };\n        this.onDocumentPointerDown = function (pev) {\n            var unselectCancel = _this.context.options.unselectCancel;\n            var downEl = getEventTargetViaRoot(pev.origEvent);\n            _this.matchesCancel = !!elementClosest(downEl, unselectCancel);\n            _this.matchesEvent = !!elementClosest(downEl, EventDragging.SELECTOR); // interaction started on an event?\n        };\n        this.onDocumentPointerUp = function (pev) {\n            var context = _this.context;\n            var documentPointer = _this.documentPointer;\n            var calendarState = context.getCurrentData();\n            // touch-scrolling should never unfocus any type of selection\n            if (!documentPointer.wasTouchScroll) {\n                if (calendarState.dateSelection && // an existing date selection?\n                    !_this.isRecentPointerDateSelect // a new pointer-initiated date selection since last onDocumentPointerUp?\n                ) {\n                    var unselectAuto = context.options.unselectAuto;\n                    if (unselectAuto && (!unselectAuto || !_this.matchesCancel)) {\n                        context.calendarApi.unselect(pev);\n                    }\n                }\n                if (calendarState.eventSelection && // an existing event selected?\n                    !_this.matchesEvent // interaction DIDN'T start on an event\n                ) {\n                    context.dispatch({ type: 'UNSELECT_EVENT' });\n                }\n            }\n            _this.isRecentPointerDateSelect = false;\n        };\n        var documentPointer = this.documentPointer = new PointerDragging(document);\n        documentPointer.shouldIgnoreMove = true;\n        documentPointer.shouldWatchScroll = false;\n        documentPointer.emitter.on('pointerdown', this.onDocumentPointerDown);\n        documentPointer.emitter.on('pointerup', this.onDocumentPointerUp);\n        /*\n        TODO: better way to know about whether there was a selection with the pointer\n        */\n        context.emitter.on('select', this.onSelect);\n    }\n    UnselectAuto.prototype.destroy = function () {\n        this.context.emitter.off('select', this.onSelect);\n        this.documentPointer.destroy();\n    };\n    return UnselectAuto;\n}());\n\nvar OPTION_REFINERS = {\n    fixedMirrorParent: identity,\n};\nvar LISTENER_REFINERS = {\n    dateClick: identity,\n    eventDragStart: identity,\n    eventDragStop: identity,\n    eventDrop: identity,\n    eventResizeStart: identity,\n    eventResizeStop: identity,\n    eventResize: identity,\n    drop: identity,\n    eventReceive: identity,\n    eventLeave: identity,\n};\n\n/*\nGiven an already instantiated draggable object for one-or-more elements,\nInterprets any dragging as an attempt to drag an events that lives outside\nof a calendar onto a calendar.\n*/\nvar ExternalElementDragging = /** @class */ (function () {\n    function ExternalElementDragging(dragging, suppliedDragMeta) {\n        var _this = this;\n        this.receivingContext = null;\n        this.droppableEvent = null; // will exist for all drags, even if create:false\n        this.suppliedDragMeta = null;\n        this.dragMeta = null;\n        this.handleDragStart = function (ev) {\n            _this.dragMeta = _this.buildDragMeta(ev.subjectEl);\n        };\n        this.handleHitUpdate = function (hit, isFinal, ev) {\n            var dragging = _this.hitDragging.dragging;\n            var receivingContext = null;\n            var droppableEvent = null;\n            var isInvalid = false;\n            var interaction = {\n                affectedEvents: createEmptyEventStore(),\n                mutatedEvents: createEmptyEventStore(),\n                isEvent: _this.dragMeta.create,\n            };\n            if (hit) {\n                receivingContext = hit.context;\n                if (_this.canDropElOnCalendar(ev.subjectEl, receivingContext)) {\n                    droppableEvent = computeEventForDateSpan(hit.dateSpan, _this.dragMeta, receivingContext);\n                    interaction.mutatedEvents = eventTupleToStore(droppableEvent);\n                    isInvalid = !isInteractionValid(interaction, hit.dateProfile, receivingContext);\n                    if (isInvalid) {\n                        interaction.mutatedEvents = createEmptyEventStore();\n                        droppableEvent = null;\n                    }\n                }\n            }\n            _this.displayDrag(receivingContext, interaction);\n            // show mirror if no already-rendered mirror element OR if we are shutting down the mirror (?)\n            // TODO: wish we could somehow wait for dispatch to guarantee render\n            dragging.setMirrorIsVisible(isFinal || !droppableEvent || !document.querySelector('.fc-event-mirror'));\n            if (!isInvalid) {\n                enableCursor();\n            }\n            else {\n                disableCursor();\n            }\n            if (!isFinal) {\n                dragging.setMirrorNeedsRevert(!droppableEvent);\n                _this.receivingContext = receivingContext;\n                _this.droppableEvent = droppableEvent;\n            }\n        };\n        this.handleDragEnd = function (pev) {\n            var _a = _this, receivingContext = _a.receivingContext, droppableEvent = _a.droppableEvent;\n            _this.clearDrag();\n            if (receivingContext && droppableEvent) {\n                var finalHit = _this.hitDragging.finalHit;\n                var finalView = finalHit.context.viewApi;\n                var dragMeta = _this.dragMeta;\n                receivingContext.emitter.trigger('drop', __assign(__assign({}, buildDatePointApiWithContext(finalHit.dateSpan, receivingContext)), { draggedEl: pev.subjectEl, jsEvent: pev.origEvent, view: finalView }));\n                if (dragMeta.create) {\n                    var addingEvents_1 = eventTupleToStore(droppableEvent);\n                    receivingContext.dispatch({\n                        type: 'MERGE_EVENTS',\n                        eventStore: addingEvents_1,\n                    });\n                    if (pev.isTouch) {\n                        receivingContext.dispatch({\n                            type: 'SELECT_EVENT',\n                            eventInstanceId: droppableEvent.instance.instanceId,\n                        });\n                    }\n                    // signal that an external event landed\n                    receivingContext.emitter.trigger('eventReceive', {\n                        event: new EventApi(receivingContext, droppableEvent.def, droppableEvent.instance),\n                        relatedEvents: [],\n                        revert: function () {\n                            receivingContext.dispatch({\n                                type: 'REMOVE_EVENTS',\n                                eventStore: addingEvents_1,\n                            });\n                        },\n                        draggedEl: pev.subjectEl,\n                        view: finalView,\n                    });\n                }\n            }\n            _this.receivingContext = null;\n            _this.droppableEvent = null;\n        };\n        var hitDragging = this.hitDragging = new HitDragging(dragging, interactionSettingsStore);\n        hitDragging.requireInitial = false; // will start outside of a component\n        hitDragging.emitter.on('dragstart', this.handleDragStart);\n        hitDragging.emitter.on('hitupdate', this.handleHitUpdate);\n        hitDragging.emitter.on('dragend', this.handleDragEnd);\n        this.suppliedDragMeta = suppliedDragMeta;\n    }\n    ExternalElementDragging.prototype.buildDragMeta = function (subjectEl) {\n        if (typeof this.suppliedDragMeta === 'object') {\n            return parseDragMeta(this.suppliedDragMeta);\n        }\n        if (typeof this.suppliedDragMeta === 'function') {\n            return parseDragMeta(this.suppliedDragMeta(subjectEl));\n        }\n        return getDragMetaFromEl(subjectEl);\n    };\n    ExternalElementDragging.prototype.displayDrag = function (nextContext, state) {\n        var prevContext = this.receivingContext;\n        if (prevContext && prevContext !== nextContext) {\n            prevContext.dispatch({ type: 'UNSET_EVENT_DRAG' });\n        }\n        if (nextContext) {\n            nextContext.dispatch({ type: 'SET_EVENT_DRAG', state: state });\n        }\n    };\n    ExternalElementDragging.prototype.clearDrag = function () {\n        if (this.receivingContext) {\n            this.receivingContext.dispatch({ type: 'UNSET_EVENT_DRAG' });\n        }\n    };\n    ExternalElementDragging.prototype.canDropElOnCalendar = function (el, receivingContext) {\n        var dropAccept = receivingContext.options.dropAccept;\n        if (typeof dropAccept === 'function') {\n            return dropAccept.call(receivingContext.calendarApi, el);\n        }\n        if (typeof dropAccept === 'string' && dropAccept) {\n            return Boolean(elementMatches(el, dropAccept));\n        }\n        return true;\n    };\n    return ExternalElementDragging;\n}());\n// Utils for computing event store from the DragMeta\n// ----------------------------------------------------------------------------------------------------\nfunction computeEventForDateSpan(dateSpan, dragMeta, context) {\n    var defProps = __assign({}, dragMeta.leftoverProps);\n    for (var _i = 0, _a = context.pluginHooks.externalDefTransforms; _i < _a.length; _i++) {\n        var transform = _a[_i];\n        __assign(defProps, transform(dateSpan, dragMeta));\n    }\n    var _b = refineEventDef(defProps, context), refined = _b.refined, extra = _b.extra;\n    var def = parseEventDef(refined, extra, dragMeta.sourceId, dateSpan.allDay, context.options.forceEventDuration || Boolean(dragMeta.duration), // hasEnd\n    context);\n    var start = dateSpan.range.start;\n    // only rely on time info if drop zone is all-day,\n    // otherwise, we already know the time\n    if (dateSpan.allDay && dragMeta.startTime) {\n        start = context.dateEnv.add(start, dragMeta.startTime);\n    }\n    var end = dragMeta.duration ?\n        context.dateEnv.add(start, dragMeta.duration) :\n        getDefaultEventEnd(dateSpan.allDay, start, context);\n    var instance = createEventInstance(def.defId, { start: start, end: end });\n    return { def: def, instance: instance };\n}\n// Utils for extracting data from element\n// ----------------------------------------------------------------------------------------------------\nfunction getDragMetaFromEl(el) {\n    var str = getEmbeddedElData(el, 'event');\n    var obj = str ?\n        JSON.parse(str) :\n        { create: false }; // if no embedded data, assume no event creation\n    return parseDragMeta(obj);\n}\nconfig.dataAttrPrefix = '';\nfunction getEmbeddedElData(el, name) {\n    var prefix = config.dataAttrPrefix;\n    var prefixedName = (prefix ? prefix + '-' : '') + name;\n    return el.getAttribute('data-' + prefixedName) || '';\n}\n\n/*\nMakes an element (that is *external* to any calendar) draggable.\nCan pass in data that determines how an event will be created when dropped onto a calendar.\nLeverages FullCalendar's internal drag-n-drop functionality WITHOUT a third-party drag system.\n*/\nvar ExternalDraggable = /** @class */ (function () {\n    function ExternalDraggable(el, settings) {\n        var _this = this;\n        if (settings === void 0) { settings = {}; }\n        this.handlePointerDown = function (ev) {\n            var dragging = _this.dragging;\n            var _a = _this.settings, minDistance = _a.minDistance, longPressDelay = _a.longPressDelay;\n            dragging.minDistance =\n                minDistance != null ?\n                    minDistance :\n                    (ev.isTouch ? 0 : BASE_OPTION_DEFAULTS.eventDragMinDistance);\n            dragging.delay =\n                ev.isTouch ? // TODO: eventually read eventLongPressDelay instead vvv\n                    (longPressDelay != null ? longPressDelay : BASE_OPTION_DEFAULTS.longPressDelay) :\n                    0;\n        };\n        this.handleDragStart = function (ev) {\n            if (ev.isTouch &&\n                _this.dragging.delay &&\n                ev.subjectEl.classList.contains('fc-event')) {\n                _this.dragging.mirror.getMirrorEl().classList.add('fc-event-selected');\n            }\n        };\n        this.settings = settings;\n        var dragging = this.dragging = new FeaturefulElementDragging(el);\n        dragging.touchScrollAllowed = false;\n        if (settings.itemSelector != null) {\n            dragging.pointer.selector = settings.itemSelector;\n        }\n        if (settings.appendTo != null) {\n            dragging.mirror.parentNode = settings.appendTo; // TODO: write tests\n        }\n        dragging.emitter.on('pointerdown', this.handlePointerDown);\n        dragging.emitter.on('dragstart', this.handleDragStart);\n        new ExternalElementDragging(dragging, settings.eventData); // eslint-disable-line no-new\n    }\n    ExternalDraggable.prototype.destroy = function () {\n        this.dragging.destroy();\n    };\n    return ExternalDraggable;\n}());\n\n/*\nDetects when a *THIRD-PARTY* drag-n-drop system interacts with elements.\nThe third-party system is responsible for drawing the visuals effects of the drag.\nThis class simply monitors for pointer movements and fires events.\nIt also has the ability to hide the moving element (the \"mirror\") during the drag.\n*/\nvar InferredElementDragging = /** @class */ (function (_super) {\n    __extends(InferredElementDragging, _super);\n    function InferredElementDragging(containerEl) {\n        var _this = _super.call(this, containerEl) || this;\n        _this.shouldIgnoreMove = false;\n        _this.mirrorSelector = '';\n        _this.currentMirrorEl = null;\n        _this.handlePointerDown = function (ev) {\n            _this.emitter.trigger('pointerdown', ev);\n            if (!_this.shouldIgnoreMove) {\n                // fire dragstart right away. does not support delay or min-distance\n                _this.emitter.trigger('dragstart', ev);\n            }\n        };\n        _this.handlePointerMove = function (ev) {\n            if (!_this.shouldIgnoreMove) {\n                _this.emitter.trigger('dragmove', ev);\n            }\n        };\n        _this.handlePointerUp = function (ev) {\n            _this.emitter.trigger('pointerup', ev);\n            if (!_this.shouldIgnoreMove) {\n                // fire dragend right away. does not support a revert animation\n                _this.emitter.trigger('dragend', ev);\n            }\n        };\n        var pointer = _this.pointer = new PointerDragging(containerEl);\n        pointer.emitter.on('pointerdown', _this.handlePointerDown);\n        pointer.emitter.on('pointermove', _this.handlePointerMove);\n        pointer.emitter.on('pointerup', _this.handlePointerUp);\n        return _this;\n    }\n    InferredElementDragging.prototype.destroy = function () {\n        this.pointer.destroy();\n    };\n    InferredElementDragging.prototype.setIgnoreMove = function (bool) {\n        this.shouldIgnoreMove = bool;\n    };\n    InferredElementDragging.prototype.setMirrorIsVisible = function (bool) {\n        if (bool) {\n            // restore a previously hidden element.\n            // use the reference in case the selector class has already been removed.\n            if (this.currentMirrorEl) {\n                this.currentMirrorEl.style.visibility = '';\n                this.currentMirrorEl = null;\n            }\n        }\n        else {\n            var mirrorEl = this.mirrorSelector\n                // TODO: somehow query FullCalendars WITHIN shadow-roots\n                ? document.querySelector(this.mirrorSelector)\n                : null;\n            if (mirrorEl) {\n                this.currentMirrorEl = mirrorEl;\n                mirrorEl.style.visibility = 'hidden';\n            }\n        }\n    };\n    return InferredElementDragging;\n}(ElementDragging));\n\n/*\nBridges third-party drag-n-drop systems with FullCalendar.\nMust be instantiated and destroyed by caller.\n*/\nvar ThirdPartyDraggable = /** @class */ (function () {\n    function ThirdPartyDraggable(containerOrSettings, settings) {\n        var containerEl = document;\n        if (\n        // wish we could just test instanceof EventTarget, but doesn't work in IE11\n        containerOrSettings === document ||\n            containerOrSettings instanceof Element) {\n            containerEl = containerOrSettings;\n            settings = settings || {};\n        }\n        else {\n            settings = (containerOrSettings || {});\n        }\n        var dragging = this.dragging = new InferredElementDragging(containerEl);\n        if (typeof settings.itemSelector === 'string') {\n            dragging.pointer.selector = settings.itemSelector;\n        }\n        else if (containerEl === document) {\n            dragging.pointer.selector = '[data-event]';\n        }\n        if (typeof settings.mirrorSelector === 'string') {\n            dragging.mirrorSelector = settings.mirrorSelector;\n        }\n        new ExternalElementDragging(dragging, settings.eventData); // eslint-disable-line no-new\n    }\n    ThirdPartyDraggable.prototype.destroy = function () {\n        this.dragging.destroy();\n    };\n    return ThirdPartyDraggable;\n}());\n\nvar main = createPlugin({\n    componentInteractions: [DateClicking, DateSelecting, EventDragging, EventResizing],\n    calendarInteractions: [UnselectAuto],\n    elementDraggingImpl: FeaturefulElementDragging,\n    optionRefiners: OPTION_REFINERS,\n    listenerRefiners: LISTENER_REFINERS,\n});\n\nexport default main;\nexport { ExternalDraggable as Draggable, FeaturefulElementDragging, PointerDragging, ThirdPartyDraggable };\n"],"names":["config","elementClosest","Emitter","applyStyle","whenTransitionDone","removeElement","ScrollController","ElementScrollController","computeInnerRect","WindowScrollController","getElRoot","preventSelection","preventContextMenu","allowSelection","allowContextMenu","ElementDragging","computeRect","getClippingParents","pointInsideRect","isDateSpansEqual","constrainPoint","intersectRects","getRectCenter","diffPoints","mapHash","rangeContainsRange","interactionSettingsToStore","Interaction","isDateSelectionValid","enableCursor","disableCursor","triggerDateSelect","compareNumbers","getElSeg","getRelevantEvents","EventApi","createEmptyEventStore","applyMutationToEventStore","isInteractionValid","buildEventApis","interactionSettingsStore","startOfDay","diffDates","createDuration","getEventTargetViaRoot","identity","eventTupleToStore","parseDragMeta","elementMatches","refineEventDef","parseEventDef","getDefaultEventEnd","createEventInstance","BASE_OPTION_DEFAULTS","createPlugin","__extends","__assign","touchMouseIgnoreWait","ignoreMouseDepth","listenerCnt","isWindowTouchMoveCancelled","PointerDragging","containerEl","_this","subjectEl","selector","handleSelector","shouldIgnoreMove","shouldWatchScroll","isDragging","isTouchDragging","wasTouchScroll","handleMouseDown","ev","shouldIgnoreMouse","isPrimaryMouseButton","tryStart","pev","createEventFromMouse","emitter","trigger","initScrollWatch","document","addEventListener","handleMouseMove","handleMouseUp","recordCoords","removeEventListener","cleanup","handleTouchStart","createEventFromTouch","targetEl","target","handleTouchMove","handleTouchEnd","window","handleTouchScroll","startIgnoringMouse","handleScroll","pageX","pageXOffset","prevScrollX","prevPageX","pageY","pageYOffset","prevScrollY","prevPageY","origEvent","isTouch","deltaX","origPageX","deltaY","origPageY","passive","listenerCreated","prototype","destroy","listenerDestroyed","querySubjectEl","downEl","destroyScrollWatch","cancelTouchScroll","isFirst","touches","length","button","ctrlKey","setTimeout","onWindowTouchMove","preventDefault","ElementMirror","isVisible","sourceEl","mirrorEl","sourceElRect","parentNode","body","zIndex","revertDuration","start","getBoundingClientRect","origScreenX","origScreenY","updateElPosition","handleMove","setIsVisible","bool","style","display","stop","needsRevertAnimation","callback","done","doRevertAnimation","finalSourceElRect","transition","left","top","getMirrorEl","cloneNode","classList","add","position","visibility","boxSizing","width","right","height","bottom","margin","appendChild","ScrollGeomCache","_super","scrollController","doesListening","call","scrollTop","getScrollTop","scrollLeft","getScrollLeft","handleScrollChange","origScrollTop","origScrollLeft","scrollWidth","getScrollWidth","scrollHeight","getScrollHeight","clientWidth","getClientWidth","clientHeight","getClientHeight","clientRect","computeClientRect","getEventTarget","setScrollTop","Math","max","min","getMaxScrollTop","setScrollLeft","getMaxScrollLeft","ElementScrollGeomCache","el","WindowScrollGeomCache","getTime","performance","now","Date","AutoScroller","isEnabled","scrollQuery","edgeThreshold","maxVelocity","pointerScreenX","pointerScreenY","isAnimating","scrollCaches","everMovedUp","everMovedDown","everMovedLeft","everMovedRight","animate","edge","computeBestEdge","handleSide","msSinceRequest","requestAnimation","scrollStartEl","buildCaches","yDelta","xDelta","_i","_a","scrollCache","requestAnimationFrame","seconds","invDistance","distance","velocity","sign","name","bestSide","rect","leftDist","rightDist","topDist","bottomDist","canScrollUp","canScrollDown","canScrollLeft","canScrollRight","queryScrollEls","map","els","query","push","apply","Array","slice","querySelectorAll","FeaturefulElementDragging","delay","minDistance","touchScrollAllowed","mirrorNeedsRevert","isInteracting","isDelayEnded","isDistanceSurpassed","delayTimeoutId","onPointerDown","pointer","mirror","startDelay","handleDistanceSurpassed","onPointerMove","distanceSq","type","autoScroller","onPointerUp","tryStopDrag","clearTimeout","on","handleDelayEnd","tryStartDrag","stopDrag","bind","setIgnoreMove","setMirrorIsVisible","setMirrorNeedsRevert","setAutoScrollEnabled","OffsetTracker","origRect","scrollEl","computeLeft","computeTop","isWithinClipping","point","isIgnoredClipping","node","tagName","HitDragging","dragging","droppableStore","useSubjectCenter","requireInitial","initialHit","movingHit","finalHit","handlePointerDown","prepareHits","processFirstCoord","handleDragStart","handleDragMove","handlePointerUp","releaseHits","handleDragEnd","origPoint","adjustedPoint","subjectRect","HTMLElement","queryHitForOffset","slicedSubjectRect","coordAdjust","forceHandle","hit","isHitsEqual","offsetTrackers","interactionSettings","component","id","offsetLeft","offsetTop","bestHit","offsetTracker","originLeft","originTop","positionLeft","positionTop","queryHit","dateProfile","activeRange","dateSpan","range","layer","componentId","context","hit0","hit1","Boolean","buildDatePointApiWithContext","props","pluginHooks","datePointTransforms","transform","buildDatePointApi","dateEnv","span","date","toDate","dateStr","formatIso","omitTime","allDay","DateClicking","settings","isValidDateDownEl","hitDragging","arg","dayEl","jsEvent","view","viewApi","calendarApi","DateSelecting","dragSelection","options","canSelect","selectable","getComponentTouchDelay$1","unselect","handleHitUpdate","isFinal","isInvalid","disallowed","isHitComboAllowed","joinHitsIntoSelection","dateSelectionTransformers","dispatch","selection","selectMinDistance","dragScroll","selectLongPressDelay","longPressDelay","dateSpan0","dateSpan1","ms","end","sort","dateSelectionTransformers_1","transformer","res","EventDragging","subjectSeg","eventRange","relevantEvents","receivingContext","validMutation","mutatedRelevantEvents","origTarget","initialContext","eventInstanceId","instance","instanceId","getCurrentData","eventStore","eventDragMinDistance","eventSelection","getComponentTouchDelay","fixedMirrorParent","dragRevertDuration","isValid","isValidSegDownEl","contains","event","def","mutation","interaction","affectedEvents","mutatedEvents","isEvent","receivingOptions","editable","droppable","computeEventMutation","eventDragMutationMassagers","eventUiBases","displayDrag","querySelector","initialContext_1","initialView","receivingContext_1","eventDef","eventInstance","eventApi","relevantEvents_1","mutatedRelevantEvents_1","clearDrag","updatedEventApi","defs","defId","instances","eventChangeArg","oldEvent","relatedEvents","revert","transformed","_b","eventDropTransformers","delta","datesDelta","eventRemoveArg","draggedEl","addedEventDef","addedEventInstance","addedEventApi","eventAddArg","SELECTOR","useEventCenter","nextContext","state","prevContext","initialCalendar","massagers","date0","date1","standardProps","hasEnd","allDayMaintainDuration","largeUnit","milliseconds","massagers_1","massager","eventLongPressDelay","EventResizing","draggingSegEl","draggingSeg","segEl","querySegEl","seg","computeMutation","startDelta","endDelta","isFromStart","instanceRange","UnselectAuto","isRecentPointerDateSelect","matchesCancel","matchesEvent","onSelect","selectInfo","onDocumentPointerDown","unselectCancel","onDocumentPointerUp","documentPointer","calendarState","dateSelection","unselectAuto","off","OPTION_REFINERS","LISTENER_REFINERS","dateClick","eventDragStart","eventDragStop","eventDrop","eventResizeStart","eventResizeStop","eventResize","drop","eventReceive","eventLeave","ExternalElementDragging","suppliedDragMeta","droppableEvent","dragMeta","buildDragMeta","create","canDropElOnCalendar","computeEventForDateSpan","finalView","addingEvents_1","getDragMetaFromEl","dropAccept","defProps","leftoverProps","externalDefTransforms","refined","extra","sourceId","forceEventDuration","duration","startTime","str","getEmbeddedElData","obj","JSON","parse","dataAttrPrefix","prefix","prefixedName","getAttribute","ExternalDraggable","itemSelector","appendTo","eventData","InferredElementDragging","mirrorSelector","currentMirrorEl","handlePointerMove","ThirdPartyDraggable","containerOrSettings","Element","main","componentInteractions","calendarInteractions","elementDraggingImpl","optionRefiners","listenerRefiners","Draggable"],"sourceRoot":"webpack:///"}